(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{LZuA:function(t,e,i){"use strict";i.d(e,"a",(function(){return _t})),i.d(e,"b",(function(){return zt})),i.d(e,"c",(function(){return Wt}));var n=i("fXoL"),o=i("tk/3"),a=i("XNiG"),r=i("cp0P"),c=i("ofXK"),s=i("tyNb"),l=i("l21D"),h=i("3Pt+"),d=i("1kSV"),p=i("urRO"),u=i.n(p),g=i("jhN1");const f=["file"];function b(t,e){if(1&t&&(n.Pb(0,"div",2),n.Lb(1,"img",3),n.fc(2,"SafeUrlPipe"),n.Ob()),2&t){const t=n.ec();n.kc("ngStyle",t.style.thumbnail),n.xb(1),n.kc("src",n.gc(2,3,t.getDownloadUrl()),n.vc)("ngStyle",t.style.img)}}const m=["FilesModal"];function v(t,e){if(1&t&&(n.Pb(0,"span"),n.Dc(1),n.Ob()),2&t){const t=n.ec(2).index,e=n.ec(2);n.xb(1),n.Fc("(",e.categoriesCounts[t],")")}}const w=function(t){return{active:t}},O=function(){return["."]};function P(t,e){if(1&t){const t=n.Qb();n.Pb(0,"a",49),n.ac("click",(function(){n.uc(t);const e=n.ec().index;return n.ec(2).categorySelected(e)})),n.Dc(1),n.Bc(2,v,2,1,"span",29),n.Ob()}if(2&t){const t=n.ec(),e=t.index,i=t.$implicit,o=n.ec(2);n.kc("ngClass",n.oc(4,w,e===o.selectedCategory))("routerLink",n.nc(6,O)),n.xb(1),n.Fc(" ",i," "),n.xb(1),n.kc("ngIf",o.listCategory1.showCategoryCounts)}}function x(t,e){if(1&t&&(n.Pb(0,"li",47),n.Bc(1,P,3,7,"a",48),n.Ob()),2&t){const t=e.index,i=n.ec(2);n.xb(1),n.kc("ngIf",0!==t&&(i.listCategory1.showEmptyCategory||!i.listCategory1.showEmptyCategory&&i.categoriesCounts[t]>0))}}function C(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",50),n.Pb(1,"lib-mfilegroup-edit",51),n.ac("done",(function(e){return n.uc(t),n.ec(2).onActionDone(e)}))("doneData",(function(e){return n.uc(t),n.ec(2).onGroupAdded(e)})),n.Ob(),n.Ob()}if(2&t){const t=n.ec(2);n.xb(1),n.kc("initData",t.parentData)("embeddedView",!0)("embedMode","create")}}function y(t,e){if(1&t){const t=n.Qb();n.Pb(0,"ul",41),n.Bc(1,x,2,1,"li",42),n.Pb(2,"li",43),n.Pb(3,"a",44),n.ac("click",(function(){return n.uc(t),n.ec().onAdd()})),n.Lb(4,"i",45),n.Dc(5," New Group"),n.Ob(),n.Bc(6,C,2,3,"div",46),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(1),n.kc("ngForOf",t.categoryDisplays),n.xb(5),n.kc("ngIf",t.isAdding)}}function M(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",52),n.Pb(1,"span"),n.Pb(2,"i",53),n.ac("click",(function(){return n.uc(t),n.ec().onSearchTextClear()})),n.Ob(),n.Ob(),n.Ob()}}function k(t,e){1&t&&n.Lb(0,"i",59)}function D(t,e){1&t&&n.Lb(0,"i",60)}function _(t,e){if(1&t&&(n.Pb(0,"span"),n.Dc(1),n.Bc(2,k,1,0,"i",61),n.Bc(3,D,1,0,"i",62),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.Fc("",t.listSortFieldDisplay," "),n.xb(1),n.kc("ngIf","asc"===t.listSortOrder),n.xb(1),n.kc("ngIf","desc"===t.listSortOrder)}}function I(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",54),n.Pb(1,"div",55),n.Pb(2,"button",56),n.Dc(3," Sort: "),n.Bc(4,_,4,3,"span",29),n.Ob(),n.Pb(5,"div",57),n.Pb(6,"a",58),n.ac("click",(function(){return n.uc(t),n.ec().setListSortAndRefresh("name","Name","asc")})),n.Dc(7,"Name"),n.Lb(8,"i",59),n.Ob(),n.Pb(9,"a",58),n.ac("click",(function(){return n.uc(t),n.ec().setListSortAndRefresh("name","Name","desc")})),n.Dc(10,"Name"),n.Lb(11,"i",60),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(4),n.kc("ngIf",t.listSortField&&!t.viewHiddenFields.includes(t.listSortField))}}function B(t,e){if(1&t&&(n.Pb(0,"span"),n.Dc(1,"Total: "),n.Pb(2,"b"),n.Dc(3),n.Ob(),n.Ob()),2&t){const t=n.ec();n.xb(3),n.Ec(t.totalCount)}}function F(t,e){1&t&&(n.Pb(0,"li",70),n.Pb(1,"a",71),n.Dc(2,"..."),n.Ob(),n.Ob())}function S(t,e){if(1&t){const t=n.Qb();n.Pb(0,"li",64),n.Pb(1,"a",72),n.ac("click",(function(){n.uc(t);const i=e.$implicit;return n.ec(2).onGotoPage(i)})),n.Dc(2),n.Ob(),n.Ob()}if(2&t){const t=e.$implicit,i=n.ec(2);n.kc("ngClass",n.oc(2,w,t==i.page)),n.xb(2),n.Ec(t)}}function L(t,e){1&t&&(n.Pb(0,"li",70),n.Pb(1,"a",71),n.Dc(2,"..."),n.Ob(),n.Ob())}const N=function(t){return{disabled:t}};function z(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div"),n.Pb(1,"ul",63),n.Pb(2,"li",64),n.Pb(3,"a",65),n.ac("click",(function(){return n.uc(t),n.ec().onPreviousPage()})),n.Pb(4,"span",7),n.Dc(5,"\xab"),n.Ob(),n.Pb(6,"span",66),n.Dc(7,"Previous"),n.Ob(),n.Ob(),n.Ob(),n.Bc(8,F,3,0,"li",67),n.Bc(9,S,3,4,"li",68),n.Bc(10,L,3,0,"li",67),n.Pb(11,"li",64),n.Pb(12,"a",69),n.ac("click",(function(){return n.uc(t),n.ec().onNextPage()})),n.Pb(13,"span",7),n.Dc(14,"\xbb"),n.Ob(),n.Pb(15,"span",66),n.Dc(16,"Next"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(2),n.kc("ngClass",n.oc(5,N,t.page<=1)),n.xb(6),n.kc("ngIf",t.leftMore),n.xb(1),n.kc("ngForOf",t.pages),n.xb(1),n.kc("ngIf",t.rightMore),n.xb(1),n.kc("ngClass",n.oc(7,N,t.page>=t.totalPages))}}function E(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"No records found."),n.Ob())}function T(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"Loading..."),n.Ob())}function R(t,e){if(1&t&&(n.Pb(0,"div",73),n.Bc(1,E,2,0,"span",29),n.Bc(2,T,2,0,"span",29),n.Ob()),2&t){const t=n.ec();n.xb(1),n.kc("ngIf",t.loaded),n.xb(1),n.kc("ngIf",!t.loaded)}}function U(t,e){if(1&t&&(n.Pb(0,"div",83),n.Dc(1),n.Ob()),2&t){const t=n.ec().$implicit,e=n.ec(2);n.xb(1),n.Fc(" ",t[e.titleFn]," ")}}const A=function(t){return{"grid-block-large":t}},j=function(t,e){return{"clickable-card pointer":t,"clicked-row":e}},W=function(t){return{"grid-head-picture-large":t}};function H(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",77),n.Pb(1,"div",78),n.Pb(2,"div",79),n.ac("click",(function(){n.uc(t);const i=e.index;return n.ec(2).clickOneItem(i)})),n.Pb(3,"div",80),n.Lb(4,"lib-mdds-file-display",81),n.Ob(),n.Bc(5,U,2,1,"div",82),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=e.$implicit,i=e.index,o=n.ec(2);n.kc("ngClass",n.oc(6,A,o.options.largePicture)),n.xb(1),n.kc("ngClass",n.pc(8,j,o.clickItemAction,o.checkedItem[i])),n.xb(2),n.kc("ngClass",n.oc(11,W,o.options.largePicture)),n.xb(1),n.kc("downloadUrl",t[o.picturelinkFn])("isLarge",o.options.largePicture),n.xb(1),n.kc("ngIf",o.options.showTitle)}}function X(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"SUCC"),n.Ob())}function Y(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"FAIL"),n.Ob())}function K(t,e){if(1&t&&(n.Pb(0,"span"),n.Bc(1,X,2,0,"span",29),n.Bc(2,Y,2,0,"span",29),n.Ob()),2&t){const t=n.ec(2).$implicit,e=n.ec(2);n.xb(1),n.kc("ngIf",e.progress[t].result.success),n.xb(1),n.kc("ngIf",!e.progress[t].result.success)}}function q(t,e){if(1&t&&(n.Pb(0,"small"),n.Dc(1),n.Pb(2,"span"),n.Dc(3),n.fc(4,"async"),n.Ob(),n.Bc(5,K,3,2,"span",29),n.Ob()),2&t){const t=n.ec().$implicit,e=n.ec(2);n.xb(1),n.Fc("",t," "),n.xb(2),n.Fc("",n.gc(4,3,e.progress[t].progress)," "),n.xb(2),n.kc("ngIf",e.uploadSuccessful)}}function Q(t,e){if(1&t&&(n.Pb(0,"div",84),n.Bc(1,q,6,5,"small",29),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.kc("ngIf",t.progress)}}function $(t,e){if(1&t&&(n.Pb(0,"div"),n.Pb(1,"div",74),n.Bc(2,H,6,13,"div",75),n.Bc(3,Q,2,1,"div",76),n.Ob(),n.Ob()),2&t){const t=n.ec();n.xb(2),n.kc("ngForOf",t.list),n.xb(1),n.kc("ngForOf",t.uploadingFiles)}}function V(t,e){if(1&t&&(n.Pb(0,"span"),n.Dc(1,"Total: "),n.Pb(2,"b"),n.Dc(3),n.Ob(),n.Ob()),2&t){const t=n.ec();n.xb(3),n.Ec(t.totalCount)}}function G(t,e){1&t&&(n.Pb(0,"li",70),n.Pb(1,"a",71),n.Dc(2,"..."),n.Ob(),n.Ob())}function Z(t,e){if(1&t){const t=n.Qb();n.Pb(0,"li",64),n.Pb(1,"a",72),n.ac("click",(function(){n.uc(t);const i=e.$implicit;return n.ec(2).onGotoPage(i)})),n.Dc(2),n.Ob(),n.Ob()}if(2&t){const t=e.$implicit,i=n.ec(2);n.kc("ngClass",n.oc(2,w,t==i.page)),n.xb(2),n.Ec(t)}}function J(t,e){1&t&&(n.Pb(0,"li",70),n.Pb(1,"a",71),n.Dc(2,"..."),n.Ob(),n.Ob())}function tt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div"),n.Pb(1,"ul",63),n.Pb(2,"li",64),n.Pb(3,"a",65),n.ac("click",(function(){return n.uc(t),n.ec().onPreviousPage()})),n.Pb(4,"span",7),n.Dc(5,"\xab"),n.Ob(),n.Pb(6,"span",66),n.Dc(7,"Previous"),n.Ob(),n.Ob(),n.Ob(),n.Bc(8,G,3,0,"li",67),n.Bc(9,Z,3,4,"li",68),n.Bc(10,J,3,0,"li",67),n.Pb(11,"li",64),n.Pb(12,"a",69),n.ac("click",(function(){return n.uc(t),n.ec().onNextPage()})),n.Pb(13,"span",7),n.Dc(14,"\xbb"),n.Ob(),n.Pb(15,"span",66),n.Dc(16,"Next"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(2),n.kc("ngClass",n.oc(5,N,t.page<=1)),n.xb(6),n.kc("ngIf",t.leftMore),n.xb(1),n.kc("ngForOf",t.pages),n.xb(1),n.kc("ngIf",t.rightMore),n.xb(1),n.kc("ngClass",n.oc(7,N,t.page>=t.totalPages))}}function et(t,e){}function it(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",85),n.Lb(1,"div",86),n.Pb(2,"lib-mdds-cropper",87),n.ac("cropper",(function(e){return n.uc(t),n.ec().cropperCreated(e)})),n.Ob(),n.Lb(3,"hr"),n.Ob()}if(2&t){const t=n.ec();n.xb(2),n.kc("downloadUrl",t.croppingPictureLink)("aspectRatio",t.options.aspectRatio)}}function nt(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"SUCC"),n.Ob())}function ot(t,e){1&t&&(n.Pb(0,"span"),n.Dc(1,"FAIL"),n.Ob())}function at(t,e){if(1&t&&(n.Pb(0,"span"),n.Bc(1,nt,2,0,"span",29),n.Bc(2,ot,2,0,"span",29),n.Ob()),2&t){const t=n.ec(2).$implicit,e=n.ec(2);n.xb(1),n.kc("ngIf",e.progress[t].result.success),n.xb(1),n.kc("ngIf",!e.progress[t].result.success)}}function rt(t,e){if(1&t&&(n.Pb(0,"small"),n.Pb(1,"span"),n.Dc(2),n.fc(3,"async"),n.Ob(),n.Bc(4,at,3,2,"span",29),n.Ob()),2&t){const t=n.ec().$implicit,e=n.ec(2);n.xb(2),n.Fc("",n.gc(3,2,e.progress[t].progress),"% "),n.xb(2),n.kc("ngIf",e.uploadSuccessful)}}function ct(t,e){if(1&t&&(n.Pb(0,"div",93),n.Bc(1,rt,5,4,"small",29),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.kc("ngIf",t.progress)}}function st(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",88),n.Pb(1,"div",89),n.Pb(2,"button",90),n.ac("click",(function(){return n.uc(t),n.ec().selectItemConfirmed()})),n.Dc(3,"Finish"),n.Ob(),n.Pb(4,"button",24),n.ac("click",(function(){return n.uc(t),n.ec().backSelect()})),n.Dc(5,"Back"),n.Ob(),n.Ob(),n.Pb(6,"div",91),n.Bc(7,ct,2,1,"div",92),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(7),n.kc("ngForOf",t.uploadingFiles)}}const lt="table[_ngcontent-%COMP%]{margin-top:.5rem;table-layout:fixed;word-wrap:break-word}.selected-row[_ngcontent-%COMP%]{background-color:#c9f5eb}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{white-space:nowrap;width:8%}.line-breaker[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;height:0;margin:20px 0;width:100%}.gridview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.grid-block[_ngcontent-%COMP%]{align-self:stretch;display:inline-block;margin:1rem;overflow-wrap:break-word;width:18rem;word-break:break-word}.grid-fields[_ngcontent-%COMP%]{height:100%}.grid-head[_ngcontent-%COMP%]{align-items:center;background-color:rgba(0,0,0,.04);display:inline-flex;width:100%}.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:3rem;width:3rem}@media screen and (min-width:500px){.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:6rem;width:6rem}}.list-block[_ngcontent-%COMP%]{margin:.5rem;overflow-wrap:break-word;width:100%;word-break:break-word}.list-card[_ngcontent-%COMP%]{align-items:center;display:flex;flex-flow:wrap;padding:.5rem}.list-fields[_ngcontent-%COMP%]{align-items:flex-start;display:inline-flex;max-width:85%;min-width:300px}.list-devider-gradient[_ngcontent-%COMP%]{background:#095484;background-image:linear-gradient(90deg,#ccc,#095484,#ccc);border:0;height:2px}.list-devider[_ngcontent-%COMP%]{width:80%}.clickable-card[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.075)}.card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .list-body-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.card-action-icons[_ngcontent-%COMP%]{bottom:0;margin-left:auto;right:.5rem;text-align:right;width:10rem}.card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-action-icons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c4bfbf}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   i.fa-edit[_ngcontent-%COMP%]:hover, tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   i.fa-edit[_ngcontent-%COMP%]:hover{color:#00f}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   i.fa-trash-alt[_ngcontent-%COMP%]:hover, tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   i.fa-trash-alt[_ngcontent-%COMP%]:hover{color:red}.action-buttons[_ngcontent-%COMP%]{float:right;text-align:right;width:100%}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin-left:1rem}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:2.8rem}.total_counts[_ngcontent-%COMP%]{padding-top:.8rem;text-align:right}[_ngcontent-%COMP%]::-ms-clear{display:none}.icon-clear[_ngcontent-%COMP%]{cursor:pointer;margin-top:.5rem}.icon-clear-inside[_ngcontent-%COMP%]{border:0;cursor:pointer;margin-left:-2rem;padding:.5rem .5rem 0;position:relative;vertical-align:middle;z-index:3}.icon-clear-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem}.pointer[_ngcontent-%COMP%]{cursor:pointer}.ref-badge[_ngcontent-%COMP%]{background-color:#eceff3;border:1px solid #eceff3}.refine-search-text[_ngcontent-%COMP%]{color:#868181;font-size:.8rem}.select-model[_ngcontent-%COMP%]{background-color:#000;background-color:rgba(0,0,0,.4);display:block;height:100%;left:0;overflow:auto;padding-top:100px;position:fixed;top:0;width:100%;z-index:1000}.select-model.show[_ngcontent-%COMP%]{display:block}.select-model-content[_ngcontent-%COMP%]{background-color:#fefefe;border:1px solid #888;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);float:right;margin-right:50px;padding:0;position:relative;width:60%}.single-line-edit[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{padding-bottom:2px}.custom-day[_ngcontent-%COMP%]{display:inline-block;height:2rem;padding:.185rem .25rem;text-align:center;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:rgba(2,117,216,.5)}.date-selection-pop[_ngcontent-%COMP%]{background-clip:padding-box;background-color:#fff;border:solid\xa0#dfdfdf;border-radius:.25rem;color:#212529;display:block;float:left;font-size:1rem;left:0;list-style:none;margin:.125rem 0 0;min-width:10rem;position:absolute;text-align:left;top:100%;z-index:1000}.add-area[_ngcontent-%COMP%]{margin-left:.75rem;margin-top:1rem}.badge-click[_ngcontent-%COMP%]{cursor:pointer}div.badge-click[_ngcontent-%COMP%]:hover{background-color:#495057!important;text-decoration:underline}.view-radio[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#bbbdbf;cursor:pointer;display:inline-block;font-size:1.5rem;font-weight:600;margin:0 1rem 0 0;transition:all .2s ease-in-out}.view-radio[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover, .view-radio[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#212529}.view-radio[_ngcontent-%COMP%]{display:none}.list-title[_ngcontent-%COMP%]{font-size:1.5rem}.sort-selection[_ngcontent-%COMP%]{min-width:200px;position:relative}.sort-dropdown[_ngcontent-%COMP%]{text-align:left;width:100%}.category2-dropdown[_ngcontent-%COMP%]{color:#007bff;font-size:1.1rem;text-align:left;width:250px}.sort-selection[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:2rem}.sort-selection[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .th-sort-arrow[_ngcontent-%COMP%]{color:#007bff;margin-left:1rem}.read-more[_ngcontent-%COMP%], .read-more-in-table[_ngcontent-%COMP%]{color:#307bff;cursor:pointer}.read-more-in-table[_ngcontent-%COMP%]{font-size:.75rem;margin-top:1rem}.read-more-in-table[_ngcontent-%COMP%]:hover, .read-more[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.no-records[_ngcontent-%COMP%]{font-size:1.25rem;margin:1rem auto;width:20rem}.list-selection[_ngcontent-%COMP%]{max-width:500px;width:90%}.modal-back[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);height:100%;left:0;min-height:100vh;overflow-y:auto;position:fixed;top:0;width:100vw;z-index:9}.modal-front[_ngcontent-%COMP%]{left:50%;margin-bottom:100px;margin-top:100px;min-width:500px;position:relative;transform:translate(-50%);width:50%}.category-nav[_ngcontent-%COMP%]{background:linear-gradient(180deg,#e9ecef,rgba(233,236,239,.2) 80%);margin-bottom:1rem;padding:1rem 20px}.slide-image[_ngcontent-%COMP%]{width:100%}.asso-link[_ngcontent-%COMP%]{font-size:.8rem;font-style:italic}.nohref-link[_ngcontent-%COMP%]{color:#007bff!important;cursor:pointer}.nohref-link[_ngcontent-%COMP%]:hover{color:#0056b3!important}.nohref-link.active[_ngcontent-%COMP%], .nohref-link.active[_ngcontent-%COMP%]:hover{color:#fff!important}.list-check-box[_ngcontent-%COMP%]{zoom:1.35}";function ht(t,e){if(1&t&&(n.Lb(0,"img",9),n.fc(1,"SafeUrlPipe")),2&t){const t=n.ec(2);n.kc("src",n.gc(1,1,t.getDownloadUrl()),n.vc)}}function dt(t,e){1&t&&n.Lb(0,"i",10)}function pt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",2),n.Pb(1,"div",3),n.Pb(2,"div",4),n.Bc(3,ht,2,3,"img",5),n.Bc(4,dt,1,0,"i",6),n.Ob(),n.Ob(),n.Pb(5,"div",7),n.Pb(6,"button",8),n.ac("click",(function(){return n.uc(t),n.ec().selectFileList()})),n.Dc(7,"Select"),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.ec();n.xb(3),n.kc("ngIf",t.downloadUrl),n.xb(1),n.kc("ngIf",!t.downloadUrl)}}function ut(t,e){}function gt(t,e){1&t&&n.Lb(0,"div",12)}function ft(t,e){if(1&t&&(n.Pb(0,"h4",13),n.Dc(1),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.Fc("",t.action," Picture Group")}}function bt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",21),n.ac("click",(function(){return n.uc(t),n.ec(4).clearValueFromDetail("name")})),n.Lb(1,"i",22),n.Ob()}}function mt(t,e){1&t&&(n.Pb(0,"div"),n.Dc(1," Name is required. "),n.Ob())}function vt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div"),n.Pb(1,"fieldset",14),n.Pb(2,"label",15),n.Dc(3,"Name"),n.Ob(),n.Pb(4,"div",16),n.Pb(5,"input",17,18),n.ac("ngModelChange",(function(e){return n.uc(t),n.ec(3).detail.name=e})),n.Ob(),n.Bc(7,bt,2,0,"div",19),n.Ob(),n.Pb(8,"div",20),n.Bc(9,mt,2,0,"div",8),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.sc(6),e=n.ec(3);n.xb(5),n.kc("ngModel",e.detail.name),n.xb(2),n.kc("ngIf",e.detail.name),n.xb(1),n.kc("hidden",t.valid||t.pristine||t.errors.minlength),n.xb(1),n.kc("ngIf",t.errors&&t.errors.required)}}function wt(t,e){if(1&t&&(n.Pb(0,"div"),n.Bc(1,vt,10,4,"div",8),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.kc("ngIf",!t.hiddenFields.includes("name"))}}function Ot(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",21),n.ac("click",(function(){return n.uc(t),n.ec(4).clearValueFromDetail("name")})),n.Lb(1,"i",22),n.Ob()}}function Pt(t,e){1&t&&(n.Pb(0,"div"),n.Dc(1," Name is required. "),n.Ob())}function xt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div"),n.Pb(1,"fieldset",14),n.Pb(2,"label",15),n.Dc(3,"Name"),n.Ob(),n.Pb(4,"div",16),n.Pb(5,"input",17,18),n.ac("ngModelChange",(function(e){return n.uc(t),n.ec(3).detail.name=e})),n.Ob(),n.Bc(7,Ot,2,0,"div",19),n.Ob(),n.Pb(8,"div",20),n.Bc(9,Pt,2,0,"div",8),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.sc(6),e=n.ec(3);n.xb(5),n.kc("ngModel",e.detail.name),n.xb(2),n.kc("ngIf",e.detail.name),n.xb(1),n.kc("hidden",t.valid||t.pristine||t.errors.minlength),n.xb(1),n.kc("ngIf",t.errors&&t.errors.required)}}function Ct(t,e){if(1&t&&(n.Pb(0,"div"),n.Bc(1,xt,10,4,"div",8),n.Ob()),2&t){const t=n.ec(2);n.xb(1),n.kc("ngIf",!t.hiddenFields.includes("name"))}}function yt(t,e){if(1&t){const t=n.Qb();n.Pb(0,"div",1),n.Bc(1,gt,1,0,"div",2),n.Pb(2,"div",3),n.Pb(3,"div",4),n.Bc(4,ft,2,1,"h4",5),n.Pb(5,"form",6,7),n.ac("ngSubmit",(function(){return n.uc(t),n.ec().onSubmit()})),n.Bc(7,wt,2,1,"div",8),n.Bc(8,Ct,2,1,"div",8),n.Pb(9,"div",9),n.Pb(10,"button",10),n.Dc(11,"Submit"),n.Ob(),n.Pb(12,"button",11),n.ac("click",(function(){return n.uc(t),n.ec().editCancel()})),n.Dc(13,"Cancel"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&t){const t=n.sc(6),e=n.ec();n.xb(1),n.kc("ngIf",!e.embeddedView),n.xb(3),n.kc("ngIf",!e.embeddedView),n.xb(3),n.kc("ngIf","Edit"==e.action),n.xb(1),n.kc("ngIf","Create"==e.action||"Add"==e.action),n.xb(2),n.kc("disabled",!t.form.valid)}}const Mt=new n.q("FILE_UPLOAD_URI",{providedIn:"root",factory:()=>"/api/files/upload"}),kt=new n.q("FILE_MANAGE_ROOT_URI",{providedIn:"root",factory:()=>"/api/files"});let Dt=(()=>{class t{constructor(t,e){this.fileUploadUrl=t,this.http=e}upload(t,e){const i={};return t.forEach(t=>{const n={group:e,name:t.name},r=new FormData;r.append("file",t,JSON.stringify(n));const c=new o.h("POST",this.fileUploadUrl,r,{reportProgress:!0}),s=new a.a,l={success:!1,value:null};this.http.request(c).subscribe(t=>{if(t.type===o.e.UploadProgress){const e=Math.round(100*t.loaded/t.total);s.next(e)}else t instanceof o.i&&(l.success=!0,l.value=t.body,s.complete())},t=>{l.success=!1,t instanceof o.d&&(l.value=t.error),s.complete()},()=>{}),i[t.name]={progress:s.asObservable(),result:l}}),i}}return t.\u0275fac=function(e){return new(e||t)(n.Xb(Mt),n.Xb(o.b))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac}),t})(),_t=(()=>{class t{constructor(){this.isLarge=!1,this.style={},this.embeddedPicture=!1}ngOnInit(){}getDownloadUrl(){let t=this.downloadUrl;return t&&!t.startsWith("data:")&&(t=this.isLarge?t:t+"_thumbnail"),t}showImageDetail(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mdds-file-display"]],inputs:{isLarge:"isLarge",style:"style",downloadUrl:"downloadUrl",clickToShow:"clickToShow",aspectRatio:"aspectRatio"},decls:2,vars:1,consts:[[2,"width","100%","height","100%"],["class","thumbnail",3,"ngStyle",4,"ngIf"],[1,"thumbnail",3,"ngStyle"],[3,"src","ngStyle"]],template:function(t,e){1&t&&(n.Pb(0,"div",0),n.Bc(1,b,3,5,"div",1),n.Ob()),2&t&&(n.xb(1),n.kc("ngIf",e.downloadUrl))},directives:function(){return[c.u,c.x]},pipes:function(){return[jt]},styles:[".thumbnail[_ngcontent-%COMP%]{height:100%;overflow:hidden;width:100%}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;left:50%;position:relative;transform:translateX(-50%);width:auto}"]}),t})();class It extends l.c{constructor(t,e){super(t,e+"/mfile/")}}let Bt=(()=>{class t extends It{constructor(t,e){super(t,e),this.filesServerRootUri=e}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(n.Xb(o.b),n.Xb(kt))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac}),t})(),Ft=(()=>{class t extends l.b{constructor(t,e,i,n,o,a){super(e,i,n,o,a),this.componentFactoryResolver=t,this.mfileService=e,this.injector=i,this.router=n,this.route=o,this.location=a,this.setItemNames("picture"),this.briefFieldsInfo=[],this.briefFieldsInfo.push(["name","Name"]),this.briefFieldsInfo.push(["type","Type"]),this.briefFieldsInfo.push(["group","Group"]),this.briefFieldsInfo.push(["labels","Labels"]),this.briefFieldsInfo.push(["size","Size"]),this.briefFieldsInfo.push(["link","Link"]),this.briefFieldsInfo.push(["createdAt","Created at"]),this.briefFieldsInfo.push(["hasThumbnail","Has Thumbnail"]),this.referenceFieldsMap={group:"mfilegroup"},this.referenceFieldsReverseMap={mfilegroup:"group"},this.schemaName="mfile",this.dateFormat="MM/DD/YYYY",this.timeFormat="hh:mm:ss",this.modulePath="files",this.indexFields=["name"]}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(n.j),n.Kb(Bt),n.Kb(n.r),n.Kb(s.d),n.Kb(s.a),n.Kb(c.o))},t.\u0275cmp=n.Eb({type:t,selectors:[["ng-component"]],features:[n.ub],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),St=(()=>{class t extends Ft{constructor(t,e,i,o,a,r){super(t,e,i,o,a,r),this.componentFactoryResolver=t,this.mfileService=e,this.injector=i,this.router=o,this.route=a,this.location=r,this.minDate={year:(new Date).getFullYear()-100,month:1,day:1},this.done=new n.n,this.view=l.i.LIST,this.stringFields.push("name"),this.stringFields.push("type"),this.stringFields.push("link"),this.referenceFields=["group"],this.dateFields=["createdAt"],this.arrayFields=[["labels","SchemaString"]],this.listViewFilter="list";const c=[{listCategoryField:"group",showCategoryCounts:!0,showEmptyCategory:!0,listCategoryRef:"mfilegroup"}];this.listCategory1=c[0]||{},this.listCategory2=c[1]||{}}static getInstance(){return new t(null,null,null,null,null,null)}ngOnInit(){this.adjustListViewForWindowSize(),this.detail=this.formatDetail(this.searchObj||{}),this.populateList()}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(n.j),n.Kb(Bt),n.Kb(n.r),n.Kb(s.d),n.Kb(s.a),n.Kb(c.o))},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mfile-list"]],inputs:{inputData:"inputData",searchObj:"searchObj",categoryBy:"categoryBy"},outputs:{done:"done"},features:[n.ub],decls:0,vars:0,template:function(t,e){},styles:[lt]}),t})(),Lt=(()=>{class t extends St{constructor(t,e,i,n,o,a){super(null,t,e,i,n,o),this.mfileService=t,this.injector=e,this.router=i,this.route=n,this.location=o,this.uploadService=a,this.options={},this.files=new Set,this.canBeClosed=!0,this.showCancelButton=!0,this.uploading=!1,this.uploadSuccessful=!0,this.selectNew=!1,this.uploadingFiles=[],this.majorUi=!1}ngOnInit(){!Array.isArray(this.inputData)||this.inputData.length<2?console.error("inputData of array is expected for gallery view: titleFn, picturelinkFn"):(this.stepTitle="Select "+this.ItemCamelName,this.titleFn=this.inputData[0],this.picturelinkFn=this.inputData[1],this.clickItemAction="select",this.itemMultiSelect=!1,this.urlCate1="MddsUncategorized",super.ngOnInit())}selectFiles(){this.selectNew=!0,this.file.nativeElement.click()}onFilesSelected(){(this.uploadSuccessful||this.selectNew)&&(this.files=new Set,this.uploadSuccessful=!1,this.selectNew=!1,this.progress=void 0,this.uploadingFiles=[]);const t=this.file.nativeElement.files;for(const e in t)isNaN(parseInt(e,10))||(this.files.add(t[e]),this.uploadingFiles.push(t[e].name));this.uploadFiles(null,()=>{for(const t of Object.keys(this.progress))this.progress[t].result.success?(this.list.push(this.formatDetail(this.progress[t].result.value)),this.categoriesCounts[this.selectedCategory]+=1):this.uploadingFiles.push(t)})}uploadFiles(t,e){this.uploading=!0;let i=this.categories[this.selectedCategory].group._id;i===l.h&&(i=null),t&&(i=t),this.progress=this.uploadService.upload(this.files,i);const n=[];for(const o of Object.keys(this.progress))n.push(this.progress[o].progress);this.canBeClosed=!1,this.showCancelButton=!1,Object(r.a)(n).subscribe(t=>{this.canBeClosed=!0,this.uploadSuccessful=!0,this.localImage=null,this.uploading=!1,this.uploadingFiles=[],this.files=new Set,e&&e()})}onGroupAdded(t){t&&(this.categoryDisplays.push(t.name),this.categories.push({group:t}),this.categoriesCounts.push(0))}onActionDone(t){this.isAdding=!1}selectConfirmed(){this.uploadingFiles=[];const t=this.getSelectedItems()[0];this.croppingPictureLink=t.link,this.selectedFileName=t._id,this.stepTitle="Crop Picture"}cropperCreated(t){this.cropper=t}selectItemConfirmed(){this.cropper.getCroppedCanvas().toBlob(t=>{const e=t;e.lastModifiedDate=new Date,e.name=this.selectedFileName;const i=t;this.uploadSuccessful=!1,this.selectNew=!1,this.progress=void 0,this.files=new Set,this.uploadingFiles=[],this.files.add(i),this.uploadingFiles.push(i.name),this.uploadFiles("mdds-file-crop",()=>{this.progress[i.name].result.success?(this.outputData={action:"selected",detail:this.progress[i.name].result.value,value:void 0},this.done.emit(!0)):this.uploadingFiles.push(i.name)})},"image/jpeg",.9)}backSelect(){this.croppingPictureLink=void 0,this.stepTitle="Select "+this.ItemCamelName,this.uploadingFiles=[]}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(Bt),n.Kb(n.r),n.Kb(s.d),n.Kb(s.a),n.Kb(c.o),n.Kb(Dt))},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mfile-list-widget-gallery"]],viewQuery:function(t,e){var i;1&t&&(n.zc(m,!0),n.zc(f,!0)),2&t&&(n.rc(i=n.bc())&&(e.focusEl=i.first),n.rc(i=n.bc())&&(e.file=i.first))},inputs:{options:"options"},features:[n.ub],decls:58,vars:15,consts:[["tabindex","0",1,"select-model","show",3,"keyup.esc"],["FilesModal",""],[1,"select-model-content"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"select-picture",3,"hidden"],["class","nav nav-pills category-nav",4,"ngIf"],[1,"main-area"],[1,"container","search"],[1,"row"],[1,"col-9"],[1,"input-group"],["type","search","id","mfileTextSearch","placeholder","Search for name",1,"form-control","border","border-secondary",3,"ngModel","ngModelChange","keydown.enter"],["mfileTextSearch",""],["class","input-group-append icon-clear-inside",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-search"],[1,"action-buttons"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"row","justify-content-end","mt-3"],["class","sort-selection mr-5",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"total_counts"],[4,"ngIf"],[1,"ml-3",3,"click"],[1,"fa","fa-sync-alt"],[1,"d-flex","justify-content-center","mt-2"],["class","no-records",4,"ngIf"],[1,"container"],["type","file","multiple","",2,"display","none",3,"change"],["file",""],["files-ref-select",""],["class","crop-area",4,"ngIf"],["class","crop-actions",4,"ngIf"],[1,"modal-footer"],[1,"nav","nav-pills","category-nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"li-add"],["routerLink",".",1,"pointer",3,"click"],["title","Add",1,"fas","fa-plus-square"],["class","add-group-pop",4,"ngIf"],[1,"nav-item"],["class","nav-link","queryParamsHandling","preserve",3,"ngClass","routerLink","click",4,"ngIf"],["queryParamsHandling","preserve",1,"nav-link",3,"ngClass","routerLink","click"],[1,"add-group-pop"],[3,"initData","embeddedView","embedMode","done","doneData"],[1,"input-group-append","icon-clear-inside"],["title","Clear",1,"fas","fa-times-circle",3,"click"],[1,"sort-selection","mr-5"],[1,"dropdown",2,"width","100%"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"sort-dropdown","btn","btn-light","btn-sm","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item","pointer",3,"click"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],["class","fas fa-arrow-up",4,"ngIf"],["class","fas fa-arrow-down",4,"ngIf"],[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["routerLink",".","aria-label","Previous",1,"page-link",3,"click"],[1,"sr-only"],["class","page-item",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["routerLink",".","aria-label","Next",1,"page-link",3,"click"],[1,"page-item"],[1,"page-link"],["routerLink",".",1,"page-link",3,"click"],[1,"no-records"],[1,"galleryView"],["class","grid-block",3,"ngClass",4,"ngFor","ngForOf"],["class","grid-block",4,"ngFor","ngForOf"],[1,"grid-block",3,"ngClass"],[1,"text-left","h-100",3,"ngClass"],[1,"grid-fields",3,"click"],[1,"grid-head-picture",3,"ngClass"],[3,"downloadUrl","isLarge"],["class","grid-picture-name",4,"ngIf"],[1,"grid-picture-name"],[1,"grid-block"],[1,"crop-area"],[1,"crop-area-ratio"],[1,"crop-area-box",3,"downloadUrl","aspectRatio","cropper"],[1,"crop-actions"],[1,"action-buttons","text-center"],["type","button",1,"btn","btn-success",3,"click"],[1,"d-flex","justify-content-center"],["class","mx-3",4,"ngFor","ngForOf"],[1,"mx-3"]],template:function(t,e){1&t&&(n.Pb(0,"div",0,1),n.ac("keyup.esc",(function(){return e.uiOnEscapeKey()})),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"div",4),n.Pb(5,"h5",5),n.Dc(6),n.Ob(),n.Pb(7,"button",6),n.ac("click",(function(){return e.uiCloseModal()})),n.Pb(8,"span",7),n.Dc(9,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(10,"div",8),n.Pb(11,"div",9),n.Bc(12,y,7,2,"ul",10),n.Pb(13,"div",11),n.Pb(14,"div",12),n.Pb(15,"div",13),n.Pb(16,"div",14),n.Pb(17,"div",15),n.Pb(18,"input",16,17),n.ac("ngModelChange",(function(t){return e.searchText=t}))("keydown.enter",(function(t){return t.target.blur(),e.searchList(),!1})),n.Ob(),n.Bc(20,M,3,0,"div",18),n.Pb(21,"div",19),n.Pb(22,"button",20),n.ac("click",(function(){return e.searchList()})),n.Lb(23,"i",21),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Lb(24,"hr"),n.Pb(25,"div",22),n.Pb(26,"button",23),n.ac("click",(function(){return e.selectConfirmed()})),n.Dc(27,"Confirm Selection"),n.Ob(),n.Pb(28,"button",24),n.ac("click",(function(){return e.selectFiles()})),n.Dc(29,"Upload New"),n.Ob(),n.Ob(),n.Pb(30,"div",25),n.Bc(31,I,12,1,"div",26),n.Ob(),n.Pb(32,"div",27),n.Lb(33,"div"),n.Pb(34,"div"),n.Pb(35,"div",28),n.Bc(36,B,4,1,"span",29),n.Pb(37,"a",30),n.ac("click",(function(){return e.onRefresh()})),n.Lb(38,"i",31),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(39,"div",32),n.Bc(40,z,17,9,"div",29),n.Ob(),n.Ob(),n.Bc(41,R,3,2,"div",33),n.Bc(42,$,4,2,"div",29),n.Pb(43,"div",34),n.Lb(44,"div",25),n.Pb(45,"div",27),n.Lb(46,"div"),n.Pb(47,"div"),n.Pb(48,"div",28),n.Bc(49,V,4,1,"span",29),n.Ob(),n.Ob(),n.Ob(),n.Pb(50,"div",32),n.Bc(51,tt,17,9,"div",29),n.Ob(),n.Ob(),n.Ob(),n.Pb(52,"input",35,36),n.ac("change",(function(){return e.onFilesSelected()})),n.Ob(),n.Bc(54,et,0,0,"ng-template",37),n.Ob(),n.Bc(55,it,4,2,"div",38),n.Bc(56,st,8,1,"div",39),n.Ob(),n.Lb(57,"div",40),n.Ob(),n.Ob(),n.Ob()),2&t&&(n.xb(6),n.Ec(e.stepTitle),n.xb(5),n.kc("hidden",e.croppingPictureLink),n.xb(1),n.kc("ngIf",e.listCategory1.listCategoryField),n.xb(6),n.kc("ngModel",e.searchText),n.xb(2),n.kc("ngIf",e.searchText),n.xb(6),n.kc("disabled",!e.isItemSelected()),n.xb(5),n.kc("ngIf",e.list.length>2),n.xb(5),n.kc("ngIf",e.list.length>2),n.xb(4),n.kc("ngIf",e.totalPages>1),n.xb(1),n.kc("ngIf",0===e.list.length),n.xb(1),n.kc("ngIf",e.list.length>0),n.xb(7),n.kc("ngIf",e.list.length>2),n.xb(2),n.kc("ngIf",e.totalPages>1),n.xb(4),n.kc("ngIf",e.croppingPictureLink),n.xb(1),n.kc("ngIf",e.croppingPictureLink))},directives:function(){return[c.u,h.c,h.p,h.s,c.t,s.g,c.r,Ut,_t,At]},pipes:function(){return[c.b]},styles:[lt,".galleryView[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.grid-block[_ngcontent-%COMP%]{align-self:stretch;display:inline-block;margin:1rem;overflow-wrap:break-word;width:10rem;word-break:break-word}.grid-block-large[_ngcontent-%COMP%]{width:20rem}.grid-fields[_ngcontent-%COMP%]{height:100%}.grid-head[_ngcontent-%COMP%]{align-items:center;background-color:rgba(0,0,0,.04);display:inline-flex;width:100%}.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:3rem;width:3rem}@media screen and (min-width:500px){.grid-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:6rem;width:100%}.grid-head-picture-large[_ngcontent-%COMP%]{height:12rem}}.clicked-row[_ngcontent-%COMP%]{background-color:rgba(167,224,169,.175);box-shadow:0 0 0 2px #44b549}.grid-picture-name[_ngcontent-%COMP%]{font-size:.75rem;margin:2px}.action-buttons[_ngcontent-%COMP%]{float:none}.select-model-content[_ngcontent-%COMP%]{width:80%}.nav-link[_ngcontent-%COMP%]{font-size:.9rem;padding:.25rem 1rem}.modal-body[_ngcontent-%COMP%]{align-items:center;justify-content:center}.category-nav[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.main-area[_ngcontent-%COMP%]{flex-grow:1}.li-add[_ngcontent-%COMP%]{position:relative}.add-group-pop[_ngcontent-%COMP%]{position:absolute;width:400px;z-index:30}.select-picture[_ngcontent-%COMP%]{display:flex;width:100%}.crop-area[_ngcontent-%COMP%]{position:relative;width:80%}.crop-area-ratio[_ngcontent-%COMP%]{margin-top:56.25%}.crop-area-box[_ngcontent-%COMP%]{background-color:silver;bottom:0;left:0;position:absolute;right:0;top:0}.crop-actions[_ngcontent-%COMP%]{margin-top:.5rem;width:100%}.crop-image[_ngcontent-%COMP%]{display:block;max-width:100%}"]}),t})(),Nt=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(n.O))},t.\u0275dir=n.Fb({type:t,selectors:[["","libMddsFileSelect",""]]}),t})(),zt=(()=>{class t{constructor(t){this.componentFactoryResolver=t,this.disableDisplay=!1,this.askForSelect=!1,this.downloadUrlChange=new n.n}ngOnInit(){}getDownloadUrl(){const t=this.downloadUrl;return t&&!t.startsWith("data:")?t+"_thumbnail":t}ngOnChanges(t){t.askForSelect&&!0===t.askForSelect.currentValue&&this.selectFileList()}selectFileList(){const t=this.refSelectDirective.viewContainerRef;t.clear();const e=this.componentFactoryResolver.resolveComponentFactory(Lt),i=t.createComponent(e).instance;i.setFocus(),i.inputData=["name","link"],i.options={canSelect:!0,largePicture:!1,showTitle:!0,aspectRatio:this.aspectRatio},this.componentSubscription=i.done.subscribe(e=>{const n=i.outputData;if(n)switch(n.action){case"selected":this.downloadUrl=n.detail.link,this.downloadUrlChange.emit(this.downloadUrl)}e&&(this.componentSubscription.unsubscribe(),t.clear())})}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(n.j))},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mdds-file-select"]],viewQuery:function(t,e){var i;1&t&&n.zc(Nt,!0),2&t&&n.rc(i=n.bc())&&(e.refSelectDirective=i.first)},inputs:{disableDisplay:"disableDisplay",askForSelect:"askForSelect",downloadUrl:"downloadUrl",aspectRatio:"aspectRatio"},outputs:{downloadUrlChange:"downloadUrlChange"},features:[n.vb],decls:2,vars:1,consts:[["style","width: 100%;",4,"ngIf"],["libMddsFileSelect",""],[2,"width","100%"],[1,"display-file"],[1,"thumbnail"],[3,"src",4,"ngIf"],["class","far fa-image",4,"ngIf"],[1,"select-file"],["type","button",1,"btn","btn-link","ml-2",3,"click"],[3,"src"],[1,"far","fa-image"]],template:function(t,e){1&t&&(n.Bc(0,pt,8,2,"div",0),n.Bc(1,ut,0,0,"ng-template",1)),2&t&&n.kc("ngIf",!e.disableDisplay)},directives:function(){return[c.u,Nt]},pipes:function(){return[jt]},styles:[".thumbnail[_ngcontent-%COMP%], .thumbnail-local[_ngcontent-%COMP%]{height:100%;overflow:hidden;width:100%}.thumbnail-local[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;padding:1px}.thumbnail-local[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:50%;position:relative;transform:translateX(-50%)}.thumbnail[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:6rem}.display-file[_ngcontent-%COMP%]{display:inline-block;width:50%}.select-file[_ngcontent-%COMP%]{display:inline-block;max-width:50%;padding-left:.75rem}"]}),t})();class Et extends l.c{constructor(t,e){super(t,e+"/mfilegroup/")}}let Tt=(()=>{class t extends Et{constructor(t,e){super(t,e),this.filesServerRootUri=e}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(n.Xb(o.b),n.Xb(kt))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac}),t})(),Rt=(()=>{class t extends l.b{constructor(t,e,i,n,o){super(t,e,i,n,o),this.mfilegroupService=t,this.injector=e,this.router=i,this.route=n,this.location=o,this.setItemNames("picture Group"),this.briefFieldsInfo=[],this.briefFieldsInfo.push(["name","Name"]),this.requiredFields=["name"],this.schemaName="mfilegroup",this.dateFormat="MM/DD/YYYY",this.timeFormat="hh:mm:ss",this.modulePath="files",this.indexFields=["name"]}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(Tt),n.Kb(n.r),n.Kb(s.d),n.Kb(s.a),n.Kb(c.o))},t.\u0275cmp=n.Eb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&n.zc(m,!0),2&t&&n.rc(i=n.bc())&&(e.focusEl=i.first)},features:[n.ub],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Ut=(()=>{class t extends Rt{constructor(t,e,i,o,a){super(t,e,i,o,a),this.mfilegroupService=t,this.injector=e,this.router=i,this.route=o,this.location=a,this.done=new n.n,this.doneData=new n.n,this.minDate={year:(new Date).getFullYear()-100,month:1,day:1},this.view=l.i.EDIT,this.stringFields.push("name"),this.detail=this.formatDetail({})}ngOnInit(){"create"==this.embedMode?(this.action="Create",this.getDetailData()):(this.id||(this.id=this.route.snapshot.paramMap.get("id")),this.id?(this.action="Edit",this.populateDetailForAction(this.id,"edit")):(this.action="Create",this.cid||(this.cid=this.route.snapshot.queryParamMap.get("cid")),this.cid?this.populateDetailFromCopy(this.cid):this.getDetailData()))}getDetailData(){if(this.initData){this.action="Add";const t={};for(const e of Object.keys(this.initData))t[e]=this.initData[e],this.hiddenFields.push(e);this.detail=this.formatDetail(t)}else this.detail=this.formatDetail({})}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(Tt),n.Kb(n.r),n.Kb(s.d),n.Kb(s.a),n.Kb(c.o))},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mfilegroup-edit"]],inputs:{id:"id",cid:"cid",initData:"initData",embeddedView:"embeddedView",embedMode:"embedMode"},outputs:{done:"done",doneData:"doneData"},features:[n.ub],decls:1,vars:1,consts:[["class","edit",4,"ngIf"],[1,"edit"],["class","action-buttons",4,"ngIf"],[1,"card",2,"text-align","left"],[1,"card-body"],["class","card-title",4,"ngIf"],[3,"ngSubmit"],["editForm","ngForm"],[4,"ngIf"],[1,"action-buttons-center"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"action-buttons"],[1,"card-title"],[1,"form-group"],["for","EditName"],[1,"input-group"],["type","text","id","EditName","required","","name","EditName",1,"form-control","rounded",3,"ngModel","ngModelChange"],["EditName","ngModel"],["class","input-group-append icon-clear-inside ",3,"click",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"input-group-append","icon-clear-inside",3,"click"],["title","Clear",1,"fas","fa-times-circle"]],template:function(t,e){1&t&&n.Bc(0,yt,14,5,"div",0),2&t&&n.kc("ngIf",e.detail)},directives:[c.u,h.F,h.q,h.r,h.c,h.A,h.p,h.s],styles:[".edit[_ngcontent-%COMP%]{margin:0 auto;width:75%}.alert[_ngcontent-%COMP%], .form-check[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{width:90%}.action-buttons[_ngcontent-%COMP%]{float:right;margin-bottom:1.25rem;text-align:right;width:100%}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .fa-angle-double-left[_ngcontent-%COMP%]{display:inline-block;margin-left:2.5rem}.action-buttons[_ngcontent-%COMP%]   .fa-angle-double-left[_ngcontent-%COMP%]{float:left;margin-top:.75rem}.action-buttons-center[_ngcontent-%COMP%]{float:right;margin-bottom:1.25rem;text-align:center;width:100%}.action-buttons-center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin-left:2.5rem}.card-title[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.input-group-append[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #ced4da;border-bottom-left-radius:0;border-radius:.25rem;border-top-left-radius:0}.ref-badge[_ngcontent-%COMP%]{background-color:#eceff3;border:1px solid #eceff3}.icon-clear[_ngcontent-%COMP%], .icon-search[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem;pointer-events:auto;z-index:1}.pointer[_ngcontent-%COMP%]{cursor:pointer}.input-group[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:.5rem}.icon-clear-inside[_ngcontent-%COMP%]{border:0;cursor:pointer;height:2rem;margin-left:-2rem;padding:.75rem .5rem 0;position:relative;vertical-align:middle;z-index:3}.icon-clear-inside-sm[_ngcontent-%COMP%]{bottom:0;cursor:pointer;height:1.5rem;margin:auto;position:absolute;right:1.5rem;top:0;z-index:3}.icon-clear-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem}"]}),t})(),At=(()=>{class t{constructor(){this.cropper=new n.n}ngOnInit(){}ngAfterViewInit(){const t=document.getElementById("mdds-cropper-container");this.cropperInstance=new u.a(t,{dragMode:"move",aspectRatio:this.aspectRatio||NaN,zoomable:!0,zoomOnWheel:!0,autoCropArea:.81}),this.cropper.emit(this.cropperInstance)}zoomIn(){this.cropperInstance.zoom(.1)}zoomOut(){this.cropperInstance.zoom(-.1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Eb({type:t,selectors:[["lib-mdds-cropper"]],inputs:{downloadUrl:"downloadUrl",aspectRatio:"aspectRatio"},outputs:{cropper:"cropper"},decls:7,vars:1,consts:[["id","mdds-cropper-container",2,"display","block","max-width","100%",3,"src"],[1,"zoom-items"],[1,"zoom-item","ripple",3,"click"],[1,"fas","fa-plus"],[1,"zoom-divider"],[1,"fas","fa-minus"]],template:function(t,e){1&t&&(n.Lb(0,"img",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.ac("click",(function(){return e.zoomIn()})),n.Lb(3,"i",3),n.Ob(),n.Lb(4,"div",4),n.Pb(5,"div",2),n.ac("click",(function(){return e.zoomOut()})),n.Lb(6,"i",5),n.Ob(),n.Ob()),2&t&&n.lc("src",e.downloadUrl,n.vc)},styles:['.zoom-items[_ngcontent-%COMP%]{align-items:center;background-color:#fff;border-radius:8px;bottom:1rem;cursor:pointer;display:flex;flex-direction:column;position:absolute;right:1rem;width:29px}.zoom-item[_ngcontent-%COMP%]{color:#464a4e;padding:5px}.zoom-item[_ngcontent-%COMP%]:hover{color:#212529}.zoom-divider[_ngcontent-%COMP%]{background-color:#e5e5e5;height:1px;transition:background-color .16s ease-out;width:19px}.ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative;transform:translateZ(0)}.ripple[_ngcontent-%COMP%]:after{background-image:radial-gradient(circle,#fff 10%,transparent 10.01%);background-position:50%;background-repeat:no-repeat;content:"";display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;transform:scale(10);transition:transform .5s,opacity 1s;width:100%}.ripple[_ngcontent-%COMP%]:active:after{opacity:.3;transform:scale(0);transition:0s}']}),t})(),jt=(()=>{class t{constructor(t){this.sanitized=t}transform(t){return t&&t.startsWith("data:")?this.sanitized.bypassSecurityTrustResourceUrl(t):t}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(g.b))},t.\u0275pipe=n.Jb({name:"SafeUrlPipe",type:t,pure:!0}),t})(),Wt=(()=>{class t{}return t.\u0275mod=n.Ib({type:t}),t.\u0275inj=n.Hb({factory:function(e){return new(e||t)},providers:[Dt,Bt,Tt],imports:[[c.c,s.h,h.k,d.r,l.d]]}),t})()},urRO:function(t,e,i){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var s="undefined"!=typeof window&&void 0!==window.document,l=s?window:{},h=!(!s||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,d=!!s&&"PointerEvent"in l,p="".concat("cropper","-crop"),u="".concat("cropper","-disabled"),g="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),b="".concat("cropper","-invisible"),m="".concat("cropper","-modal"),v="".concat("cropper","-move"),w="".concat("cropper","Action"),O="".concat("cropper","Preview"),P=d?"pointerdown":h?"touchstart":"mousedown",x=d?"pointermove":h?"touchmove":"mousemove",C=d?"pointerup pointercancel":h?"touchend touchcancel":"mouseup",y=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,M=/^data:/,k=/^data:image\/jpeg;base64,/,D=/^img|canvas$/i,_={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},I=Number.isNaN||l.isNaN;function B(t){return"number"==typeof t&&!I(t)}var F=function(t){return t>0&&t<1/0};function S(t){return void 0===t}function L(e){return"object"===t(e)&&null!==e}var N=Object.prototype.hasOwnProperty;function z(t){if(!L(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&N.call(i,"isPrototypeOf")}catch(n){return!1}}function E(t){return"function"==typeof t}var T=Array.prototype.slice;function R(t){return Array.from?Array.from(t):T.call(t)}function U(t,e){return t&&E(e)&&(Array.isArray(t)||B(t.length)?R(t).forEach((function(i,n){e.call(t,i,n,t)})):L(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var A=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return L(t)&&i.length>0&&i.forEach((function(e){L(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},j=/\.\d*(?:0|9){12}\d*$/;function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return j.test(t)?Math.round(t*e)/e:t}var H=/^width|height|left|top|marginLeft|marginTop$/;function X(t,e){var i=t.style;U(e,(function(t,e){H.test(e)&&B(t)&&(t="".concat(t,"px")),i[e]=t}))}function Y(t,e){if(e)if(B(t.length))U(t,(function(t){Y(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function K(t,e){e&&(B(t.length)?U(t,(function(t){K(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function q(t,e,i){e&&(B(t.length)?U(t,(function(t){q(t,e,i)})):i?Y(t,e):K(t,e))}var Q=/([a-z\d])([A-Z])/g;function $(t){return t.replace(Q,"$1-$2").toLowerCase()}function V(t,e){return L(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat($(e)))}function G(t,e,i){L(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat($(e)),i)}var Z=/\s\s*/,J=function(){var t=!1;if(s){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",i,n),l.removeEventListener("test",i,n)}return t}();function tt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(Z).forEach((function(e){if(!J){var a=t.listeners;a&&a[e]&&a[e][i]&&(o=a[e][i],delete a[e][i],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,o,n)}))}function et(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(Z).forEach((function(e){if(n.once&&!J){var a=t.listeners,r=void 0===a?{}:a;o=function(){delete r[e][i],t.removeEventListener(e,o,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];i.apply(t,c)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],n),r[e][i]=o,t.listeners=r}t.addEventListener(e,o,n)}))}function it(t,e,i){var n;return E(Event)&&E(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function nt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ot=l.location,at=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function rt(t){var e=t.match(at);return null!==e&&(e[1]!==ot.protocol||e[2]!==ot.hostname||e[3]!==ot.port)}function ct(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function st(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,o=t.translateX,a=t.translateY,r=[];B(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),B(a)&&0!==a&&r.push("translateY(".concat(a,"px)")),B(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),B(i)&&1!==i&&r.push("scaleX(".concat(i,")")),B(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var c=r.length?r.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function lt(t,e){var i=t.pageX,n=t.pageY,o={endX:i,endY:n};return e?o:a({startX:i,startY:n},o)}function ht(t){var e=t.aspectRatio,i=t.height,n=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=F(n),r=F(i);if(a&&r){var c=i*e;"contain"===o&&c>n||"cover"===o&&c<n?i=n/e:n=i*e}else a?i=n/e:r&&(n=i*e);return{width:n,height:i}}function dt(t,e,i,n){var o=e.aspectRatio,a=e.naturalWidth,c=e.naturalHeight,s=e.rotate,l=void 0===s?0:s,h=e.scaleX,d=void 0===h?1:h,p=e.scaleY,u=void 0===p?1:p,g=i.aspectRatio,f=i.naturalWidth,b=i.naturalHeight,m=n.fillColor,v=void 0===m?"transparent":m,w=n.imageSmoothingEnabled,O=void 0===w||w,P=n.imageSmoothingQuality,x=void 0===P?"low":P,C=n.maxWidth,y=void 0===C?1/0:C,M=n.maxHeight,k=void 0===M?1/0:M,D=n.minWidth,_=void 0===D?0:D,I=n.minHeight,B=void 0===I?0:I,F=document.createElement("canvas"),S=F.getContext("2d"),L=ht({aspectRatio:g,width:y,height:k}),N=ht({aspectRatio:g,width:_,height:B},"cover"),z=Math.min(L.width,Math.max(N.width,f)),E=Math.min(L.height,Math.max(N.height,b)),T=ht({aspectRatio:o,width:y,height:k}),R=ht({aspectRatio:o,width:_,height:B},"cover"),U=Math.min(T.width,Math.max(R.width,a)),A=Math.min(T.height,Math.max(R.height,c)),j=[-U/2,-A/2,U,A];return F.width=W(z),F.height=W(E),S.fillStyle=v,S.fillRect(0,0,z,E),S.save(),S.translate(z/2,E/2),S.rotate(l*Math.PI/180),S.scale(d,u),S.imageSmoothingEnabled=O,S.imageSmoothingQuality=x,S.drawImage.apply(S,[t].concat(r(j.map((function(t){return Math.floor(W(t))}))))),S.restore(),F}var pt=String.fromCharCode,ut=/^data:.*,/,gt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper;Y(n,g),K(t,g);var o={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=o,X(n,{width:o.width,height:o.height}),Y(t,g),K(n,g)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,o=n?e.naturalHeight:e.naturalWidth,a=n?e.naturalWidth:e.naturalHeight,r=o/a,c=t.width,s=t.height;t.height*r>t.width?3===i?c=t.height*r:s=t.width/r:3===i?s=t.width/r:c=t.height*r;var l={aspectRatio:r,naturalWidth:o,naturalHeight:a,width:c,height:s};l.left=(t.width-c)/2,l.top=(t.height-s)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=A({},e),this.initialCanvasData=A({},l)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,a=this.cropBoxData,r=i.viewMode,c=o.aspectRatio,s=this.cropped&&a;if(t){var l=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0;r>1?(l=Math.max(l,n.width),h=Math.max(h,n.height),3===r&&(h*c>l?l=h*c:h=l/c)):r>0&&(l?l=Math.max(l,s?a.width:0):h?h=Math.max(h,s?a.height:0):s&&((h=a.height)*c>(l=a.width)?l=h*c:h=l/c));var d=ht({aspectRatio:c,width:l,height:h});h=d.height,o.minWidth=l=d.width,o.minHeight=h,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(r>(s?0:1)){var p=n.width-o.width,u=n.height-o.height;o.minLeft=Math.min(0,p),o.minTop=Math.min(0,u),o.maxLeft=Math.max(0,p),o.maxTop=Math.max(0,u),s&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,2===r&&(o.width>=n.width&&(o.minLeft=Math.min(0,p),o.maxLeft=Math.max(0,p)),o.height>=n.height&&(o.minTop=Math.min(0,u),o.maxTop=Math.max(0,u))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var o=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var o=n%90*Math.PI/180,a=Math.sin(o),r=Math.cos(o),c=e*r+i*a,s=e*a+i*r;return n>90?{width:s,height:c}:{width:c,height:s}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=o.width,r=o.height,c=i.width*(a/i.naturalWidth),s=i.height*(r/i.naturalHeight);i.left-=(c-i.width)/2,i.top-=(s-i.height)/2,i.width=c,i.height=s,i.aspectRatio=a/r,i.naturalWidth=a,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,X(this.canvas,A({width:i.width,height:i.height},st({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),o=i.naturalHeight*(e.height/e.naturalHeight);A(i,{width:n,height:o,left:(e.width-n)/2,top:(e.height-o)/2}),X(this.image,A({width:i.width,height:i.height},st(A({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};i&&(e.height*i>e.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=A({},o)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,a=this.cropBoxData,r=this.limited,c=i.aspectRatio;if(t){var s=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,h=r?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,d=r?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;s=Math.min(s,n.width),l=Math.min(l,n.height),c&&(s&&l?l*c>s?l=s/c:s=l*c:s?l=s/c:l&&(s=l*c),d*c>h?d=h/c:h=d*c),a.minWidth=Math.min(s,h),a.minHeight=Math.min(l,d),a.maxWidth=h,a.maxHeight=d}e&&(r?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(n.width,o.left+o.width)-a.width,a.maxTop=Math.min(n.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&G(this.face,w,i.width>=e.width&&i.height>=e.height?"move":"all"),X(this.cropBox,A({width:i.width,height:i.height},st({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),it(this.element,"crop",this.getData())}},ft={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=n,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,U(r,(function(t){var i=document.createElement("img");G(t,O,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=o,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){U(this.previews,(function(t){var e=V(t,O);X(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(L(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat($(e)))}(t,O)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,o=i.height,a=t.width,r=t.height,c=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(X(this.viewBoxImage,A({width:a,height:r},st(A({translateX:-c,translateY:-s},t)))),U(this.previews,(function(e){var i=V(e,O),l=i.width,h=i.height,d=l,p=h,u=1;n&&(p=o*(u=l/n)),o&&p>h&&(d=n*(u=h/o),p=h),X(e,{width:d,height:p}),X(e.getElementsByTagName("img")[0],A({width:a*u,height:r*u},st(A({translateX:-c*u,translateY:-s*u},t))))})))}},bt={bind:function(){var t=this.element,e=this.options,i=this.cropper;E(e.cropstart)&&et(t,"cropstart",e.cropstart),E(e.cropmove)&&et(t,"cropmove",e.cropmove),E(e.cropend)&&et(t,"cropend",e.cropend),E(e.crop)&&et(t,"crop",e.crop),E(e.zoom)&&et(t,"zoom",e.zoom),et(i,P,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&et(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&et(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),et(t.ownerDocument,x,this.onCropMove=this.cropMove.bind(this)),et(t.ownerDocument,C,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&et(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;E(e.cropstart)&&tt(t,"cropstart",e.cropstart),E(e.cropmove)&&tt(t,"cropmove",e.cropmove),E(e.cropend)&&tt(t,"cropend",e.cropend),E(e.crop)&&tt(t,"crop",e.crop),E(e.zoom)&&tt(t,"zoom",e.zoom),tt(i,P,this.onCropStart),e.zoomable&&e.zoomOnWheel&&tt(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&tt(i,"dblclick",this.onDblclick),tt(t.ownerDocument,x,this.onCropMove),tt(t.ownerDocument,C,this.onCropEnd),e.responsive&&tt(window,"resize",this.onResize)}},mt={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,o=this.containerData,a=n.offsetWidth/o.width;1===a&&n.offsetHeight===o.height||(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(U(t,(function(e,i){t[i]=e*a}))),this.setCropBoxData(U(e,(function(t,i){e[i]=t*a})))))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=p,((t=this.dragBox).classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(B(e)&&1!==e||B(i)&&0!==i||t.ctrlKey))){var n,o=this.options,a=this.pointers;t.changedTouches?U(t.changedTouches,(function(t){a[t.identifier]=lt(t)})):a[t.pointerId||0]=lt(t),n=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?"zoom":V(t.target,w),y.test(n)&&!1!==it(this.element,"cropstart",{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,Y(this.dragBox,m)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==it(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?U(t.changedTouches,(function(t){A(i[t.identifier]||{},lt(t,!0))})):A(i[t.pointerId||0]||{},lt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?U(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,q(this.dragBox,m,this.cropped&&this.options.modal)),it(this.element,"cropend",{originalEvent:t,action:e}))}}},vt={change:function(t){var e,i=this.canvasData,n=this.containerData,o=this.cropBoxData,r=this.pointers,c=this.action,s=this.options.aspectRatio,l=o.left,h=o.top,d=o.width,p=o.height,u=l+d,f=h+p,b=0,m=0,v=n.width,w=n.height,O=!0;!s&&t.shiftKey&&(s=d&&p?d/p:1),this.limited&&(m=o.minTop,v=(b=o.minLeft)+Math.min(n.width,i.width,i.left+i.width),w=m+Math.min(n.height,i.height,i.top+i.height));var P=r[Object.keys(r)[0]],x={x:P.endX-P.startX,y:P.endY-P.startY},C=function(t){switch(t){case"e":u+x.x>v&&(x.x=v-u);break;case"w":l+x.x<b&&(x.x=b-l);break;case"n":h+x.y<m&&(x.y=m-h);break;case"s":f+x.y>w&&(x.y=w-f)}};switch(c){case"all":l+=x.x,h+=x.y;break;case"e":if(x.x>=0&&(u>=v||s&&(h<=m||f>=w))){O=!1;break}C("e"),(d+=x.x)<0&&(c="w",l-=d=-d),s&&(h+=(o.height-(p=d/s))/2);break;case"n":if(x.y<=0&&(h<=m||s&&(l<=b||u>=v))){O=!1;break}C("n"),h+=x.y,(p-=x.y)<0&&(c="s",h-=p=-p),s&&(l+=(o.width-(d=p*s))/2);break;case"w":if(x.x<=0&&(l<=b||s&&(h<=m||f>=w))){O=!1;break}C("w"),l+=x.x,(d-=x.x)<0&&(c="e",l-=d=-d),s&&(h+=(o.height-(p=d/s))/2);break;case"s":if(x.y>=0&&(f>=w||s&&(l<=b||u>=v))){O=!1;break}C("s"),(p+=x.y)<0&&(c="n",h-=p=-p),s&&(l+=(o.width-(d=p*s))/2);break;case"ne":if(s){if(x.y<=0&&(h<=m||u>=v)){O=!1;break}C("n"),h+=x.y,d=(p-=x.y)*s}else C("n"),C("e"),x.x>=0?u<v?d+=x.x:x.y<=0&&h<=m&&(O=!1):d+=x.x,x.y<=0?h>m&&(p-=x.y,h+=x.y):(p-=x.y,h+=x.y);d<0&&p<0?(c="sw",h-=p=-p,l-=d=-d):d<0?(c="nw",l-=d=-d):p<0&&(c="se",h-=p=-p);break;case"nw":if(s){if(x.y<=0&&(h<=m||l<=b)){O=!1;break}C("n"),h+=x.y,l+=o.width-(d=(p-=x.y)*s)}else C("n"),C("w"),x.x<=0?l>b?(d-=x.x,l+=x.x):x.y<=0&&h<=m&&(O=!1):(d-=x.x,l+=x.x),x.y<=0?h>m&&(p-=x.y,h+=x.y):(p-=x.y,h+=x.y);d<0&&p<0?(c="se",h-=p=-p,l-=d=-d):d<0?(c="ne",l-=d=-d):p<0&&(c="sw",h-=p=-p);break;case"sw":if(s){if(x.x<=0&&(l<=b||f>=w)){O=!1;break}C("w"),l+=x.x,p=(d-=x.x)/s}else C("s"),C("w"),x.x<=0?l>b?(d-=x.x,l+=x.x):x.y>=0&&f>=w&&(O=!1):(d-=x.x,l+=x.x),x.y>=0?f<w&&(p+=x.y):p+=x.y;d<0&&p<0?(c="ne",h-=p=-p,l-=d=-d):d<0?(c="se",l-=d=-d):p<0&&(c="nw",h-=p=-p);break;case"se":if(s){if(x.x>=0&&(u>=v||f>=w)){O=!1;break}C("e"),p=(d+=x.x)/s}else C("s"),C("e"),x.x>=0?u<v?d+=x.x:x.y>=0&&f>=w&&(O=!1):d+=x.x,x.y>=0?f<w&&(p+=x.y):p+=x.y;d<0&&p<0?(c="nw",h-=p=-p,l-=d=-d):d<0?(c="sw",l-=d=-d):p<0&&(c="ne",h-=p=-p);break;case"move":this.move(x.x,x.y),O=!1;break;case"zoom":this.zoom(function(t){var e=a({},t),i=[];return U(t,(function(t,n){delete e[n],U(e,(function(e){var n=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),c=Math.sqrt(n*n+o*o),s=Math.sqrt(a*a+r*r);i.push((s-c)/c)}))})),i.sort((function(t,e){return Math.abs(t)<Math.abs(e)})),i[0]}(r),t),O=!1;break;case"crop":if(!x.x||!x.y){O=!1;break}e=nt(this.cropper),l=P.startX-e.left,h=P.startY-e.top,d=o.minWidth,p=o.minHeight,x.x>0?c=x.y>0?"se":"ne":x.x<0&&(l-=d,c=x.y>0?"sw":"nw"),x.y<0&&(h-=p),this.cropped||(K(this.cropBox,g),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}O&&(o.width=d,o.height=p,o.left=l,o.top=h,this.action=c,this.renderCropBox()),U(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},wt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Y(this.dragBox,m),K(this.cropBox,g),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=A({},this.initialImageData),this.canvasData=A({},this.initialCanvasData),this.cropBoxData=A({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(A(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),K(this.dragBox,m),Y(this.cropBox,g)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,U(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,K(this.cropper,u)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Y(this.cropper,u)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,o=i.top;return this.moveTo(S(t)?t:n+Number(t),S(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(B(t)&&(i.left=t,n=!0),B(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),this.zoomTo(i.width*(t=t<0?1/(1-t):1+t)/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,o=this.canvasData,a=o.width,r=o.height,c=o.naturalWidth,s=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var l=c*t,h=s*t;if(!1===it(this.element,"zoom",{ratio:t,oldRatio:a/c,originalEvent:i}))return this;if(i){var d=this.pointers,p=nt(this.cropper),u=d&&Object.keys(d).length?function(t){var e=0,i=0,n=0;return U(t,(function(t){e+=t.startX,i+=t.startY,n+=1})),{pageX:e/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};o.left-=(u.pageX-p.left-o.left)/a*(l-a),o.top-=(u.pageY-p.top-o.top)/r*(h-r)}else z(e)&&B(e.x)&&B(e.y)?(o.left-=(e.x-o.left)/a*(l-a),o.top-=(e.y-o.top)/r*(h-r)):(o.left-=(l-a)/2,o.top-=(h-r)/2);o.width=l,o.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return B(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,B(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(B(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(B(t)&&(i.scaleX=t,n=!0),B(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var r=n.width/n.naturalWidth;if(U(t={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height},(function(e,i){t[i]=e/r})),e){var c=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=c-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&z(t)){var a=!1;e.rotatable&&B(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,a=!0),e.scalable&&(B(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,a=!0),B(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;B(t.x)&&(o.left=t.x*r+n.left),B(t.y)&&(o.top=t.y*r+n.top),B(t.width)&&(o.width=t.width*r),B(t.height)&&(o.height=t.height*r),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?A({},this.containerData):{}},getImageData:function(){return this.sized?A({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&U(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&z(t)&&(B(t.left)&&(e.left=t.left),B(t.top)&&(e.top=t.top),B(t.width)?(e.width=t.width,e.height=t.width/i):B(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&z(t)&&(B(t.left)&&(n.left=t.left),B(t.top)&&(n.top=t.top),B(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),B(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),o&&(e?n.height=n.width/o:i&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=dt(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),o=n.x,a=n.y,c=n.width,s=n.height,l=i.width/Math.floor(e.naturalWidth);1!==l&&(o*=l,a*=l,c*=l,s*=l);var h=c/s,d=ht({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=ht({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=ht({aspectRatio:h,width:t.width||(1!==l?i.width:c),height:t.height||(1!==l?i.height:s)}),g=u.width,f=u.height;g=Math.min(d.width,Math.max(p.width,g)),f=Math.min(d.height,Math.max(p.height,f));var b=document.createElement("canvas"),m=b.getContext("2d");b.width=W(g),b.height=W(f),m.fillStyle=t.fillColor||"transparent",m.fillRect(0,0,g,f);var v=t.imageSmoothingEnabled,w=void 0===v||v,O=t.imageSmoothingQuality;m.imageSmoothingEnabled=w,O&&(m.imageSmoothingQuality=O);var P,x,C,y,M,k,D=i.width,_=i.height,I=o,B=a;I<=-c||I>D?(I=0,P=0,C=0,M=0):I<=0?(C=-I,I=0,M=P=Math.min(D,c+I)):I<=D&&(C=0,M=P=Math.min(c,D-I)),P<=0||B<=-s||B>_?(B=0,x=0,y=0,k=0):B<=0?(y=-B,B=0,k=x=Math.min(_,s+B)):B<=_&&(y=0,k=x=Math.min(s,_-B));var F=[I,B,P,x];if(M>0&&k>0){var S=g/c;F.push(C*S,y*S,M*S,k*S)}return m.drawImage.apply(m,[i].concat(r(F.map((function(t){return Math.floor(W(t))}))))),b},setAspectRatio:function(t){var e=this.options;return this.disabled||S(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o="crop"===t,a=e.movable&&"move"===t;e.dragMode=t=o||a?t:"none",G(i,w,t),q(i,p,o),q(i,v,a),e.cropBoxMovable||(G(n,w,t),q(n,p,o),q(n,v,a))}return this}},Ot=l.Cropper,Pt=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!i||!D.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=A({},_,z(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var n,o,a;return n=t,a=[{key:"noConflict",value:function(){return window.Cropper=Ot,t}},{key:"setDefaults",value:function(t){A(_,z(t)&&t)}}],(o=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(M.test(t))k.test(t)?this.read((o=t.replace(ut,""),a=atob(o),r=new ArrayBuffer(a.length),U(c=new Uint8Array(r),(function(t,e){c[e]=a.charCodeAt(e)})),r)):this.clone();else{var o,a,r,c,s=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=l,s.onerror=l,s.ontimeout=l,s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&rt(t)&&i.crossOrigin&&(t=ct(t)),s.open("GET",t),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=function(t){var e,i=new DataView(t);try{var n,o,a;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,c=2;c+1<r;){if(255===i.getUint8(c)&&225===i.getUint8(c+1)){o=c;break}c+=1}if(o){var s=o+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var o=e;o<i;o+=1)n+=pt(t.getUint8(o));return n}(i,o+4,4)){var l=i.getUint16(s);if(((n=18761===l)||19789===l)&&42===i.getUint16(s+2,n)){var h=i.getUint32(s+4,n);h>=8&&(a=s+h)}}}if(a){var d,p,u=i.getUint16(a,n);for(p=0;p<u;p+=1)if(274===i.getUint16(d=a+12*p+2,n)){e=i.getUint16(d+=8,n),i.setUint16(d,1,n);break}}}catch(g){e=1}return e}(t),o=0,a=1,r=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(pt.apply(null,R(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(i.join("")))}(t);var c=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);o=c.rotate,a=c.scaleX,r=c.scaleY}e.rotatable&&(i.rotate=o),e.scalable&&(i.scaleX=a,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&rt(e)&&(i||(i="anonymous"),n=ct(e)),this.crossOrigin=i,this.crossOriginUrl=n;var o=document.createElement("img");i&&(o.crossOrigin=i),o.src=n||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),Y(o,f),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),n=function(e,i){A(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),i||a.removeChild(o)},o.src=e.src,i||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=o.querySelector(".".concat("cropper","-container")),r=a.querySelector(".".concat("cropper","-canvas")),c=a.querySelector(".".concat("cropper","-drag-box")),s=a.querySelector(".".concat("cropper","-crop-box")),l=s.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=a,this.canvas=r,this.dragBox=c,this.cropBox=s,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=l,r.appendChild(i),Y(t,g),n.insertBefore(a,t.nextSibling),this.isImg||K(i,f),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Y(s,g),e.guides||Y(s.getElementsByClassName("".concat("cropper","-dashed")),g),e.center||Y(s.getElementsByClassName("".concat("cropper","-center")),g),e.background&&Y(a,"".concat("cropper","-bg")),e.highlight||Y(l,b),e.cropBoxMovable&&(Y(l,v),G(l,w,"all")),e.cropBoxResizable||(Y(s.getElementsByClassName("".concat("cropper","-line")),g),Y(s.getElementsByClassName("".concat("cropper","-point")),g)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),E(e.ready)&&et(t,"ready",e.ready,{once:!0}),it(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),K(this.element,g))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(n.prototype,o),a&&i(n,a),t}();return A(Pt.prototype,gt,ft,bt,mt,vt,wt),Pt}()}}]);