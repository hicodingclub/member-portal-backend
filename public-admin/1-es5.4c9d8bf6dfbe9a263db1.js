!function(){function t(e,n,i){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(e,n,i||e)}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{LZuA:function(n,o,c){"use strict";c.d(o,"a",(function(){return Nt})),c.d(o,"b",(function(){return At})),c.d(o,"c",(function(){return Qt}));var l=c("fXoL"),h=c("tk/3"),d=c("XNiG"),u=c("cp0P"),p=c("ofXK"),g=c("tyNb"),f=c("l21D"),b=c("3Pt+"),m=c("1kSV"),v=c("urRO"),w=c.n(v),O=c("jhN1"),y=["file"];function P(t,e){if(1&t&&(l.Pb(0,"div",2),l.Lb(1,"img",3),l.fc(2,"SafeUrlPipe"),l.Ob()),2&t){var n=l.ec();l.kc("ngStyle",n.style.thumbnail),l.xb(1),l.kc("src",l.gc(2,3,n.getDownloadUrl()),l.vc)("ngStyle",n.style.img)}}var x=["FilesModal"];function C(t,e){if(1&t&&(l.Pb(0,"span"),l.Dc(1),l.Ob()),2&t){var n=l.ec(2).index,i=l.ec(2);l.xb(1),l.Fc("(",i.categoriesCounts[n],")")}}var M=function(t){return{active:t}},k=function(){return["."]};function D(t,e){if(1&t){var n=l.Qb();l.Pb(0,"a",49),l.ac("click",(function(){l.uc(n);var t=l.ec().index;return l.ec(2).categorySelected(t)})),l.Dc(1),l.Bc(2,C,2,1,"span",29),l.Ob()}if(2&t){var i=l.ec(),o=i.index,a=i.$implicit,r=l.ec(2);l.kc("ngClass",l.oc(4,M,o===r.selectedCategory))("routerLink",l.nc(6,k)),l.xb(1),l.Fc(" ",a," "),l.xb(1),l.kc("ngIf",r.listCategory1.showCategoryCounts)}}function _(t,e){if(1&t&&(l.Pb(0,"li",47),l.Bc(1,D,3,7,"a",48),l.Ob()),2&t){var n=e.index,i=l.ec(2);l.xb(1),l.kc("ngIf",0!==n&&(i.listCategory1.showEmptyCategory||!i.listCategory1.showEmptyCategory&&i.categoriesCounts[n]>0))}}function I(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",50),l.Pb(1,"lib-mfilegroup-edit",51),l.ac("done",(function(t){return l.uc(n),l.ec(2).onActionDone(t)}))("doneData",(function(t){return l.uc(n),l.ec(2).onGroupAdded(t)})),l.Ob(),l.Ob()}if(2&t){var i=l.ec(2);l.xb(1),l.kc("initData",i.parentData)("embeddedView",!0)("embedMode","create")}}function B(t,e){if(1&t){var n=l.Qb();l.Pb(0,"ul",41),l.Bc(1,_,2,1,"li",42),l.Pb(2,"li",43),l.Pb(3,"a",44),l.ac("click",(function(){return l.uc(n),l.ec().onAdd()})),l.Lb(4,"i",45),l.Dc(5," New Group"),l.Ob(),l.Bc(6,I,2,3,"div",46),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(1),l.kc("ngForOf",i.categoryDisplays),l.xb(5),l.kc("ngIf",i.isAdding)}}function F(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",52),l.Pb(1,"span"),l.Pb(2,"i",53),l.ac("click",(function(){return l.uc(n),l.ec().onSearchTextClear()})),l.Ob(),l.Ob(),l.Ob()}}function S(t,e){1&t&&l.Lb(0,"i",59)}function L(t,e){1&t&&l.Lb(0,"i",60)}function N(t,e){if(1&t&&(l.Pb(0,"span"),l.Dc(1),l.Bc(2,S,1,0,"i",61),l.Bc(3,L,1,0,"i",62),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.Fc("",n.listSortFieldDisplay," "),l.xb(1),l.kc("ngIf","asc"===n.listSortOrder),l.xb(1),l.kc("ngIf","desc"===n.listSortOrder)}}function z(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",54),l.Pb(1,"div",55),l.Pb(2,"button",56),l.Dc(3," Sort: "),l.Bc(4,N,4,3,"span",29),l.Ob(),l.Pb(5,"div",57),l.Pb(6,"a",58),l.ac("click",(function(){return l.uc(n),l.ec().setListSortAndRefresh("name","Name","asc")})),l.Dc(7,"Name"),l.Lb(8,"i",59),l.Ob(),l.Pb(9,"a",58),l.ac("click",(function(){return l.uc(n),l.ec().setListSortAndRefresh("name","Name","desc")})),l.Dc(10,"Name"),l.Lb(11,"i",60),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(4),l.kc("ngIf",i.listSortField&&!i.viewHiddenFields.includes(i.listSortField))}}function E(t,e){if(1&t&&(l.Pb(0,"span"),l.Dc(1,"Total: "),l.Pb(2,"b"),l.Dc(3),l.Ob(),l.Ob()),2&t){var n=l.ec();l.xb(3),l.Ec(n.totalCount)}}function T(t,e){1&t&&(l.Pb(0,"li",70),l.Pb(1,"a",71),l.Dc(2,"..."),l.Ob(),l.Ob())}function R(t,e){if(1&t){var n=l.Qb();l.Pb(0,"li",64),l.Pb(1,"a",72),l.ac("click",(function(){l.uc(n);var t=e.$implicit;return l.ec(2).onGotoPage(t)})),l.Dc(2),l.Ob(),l.Ob()}if(2&t){var i=e.$implicit,o=l.ec(2);l.kc("ngClass",l.oc(2,M,i==o.page)),l.xb(2),l.Ec(i)}}function j(t,e){1&t&&(l.Pb(0,"li",70),l.Pb(1,"a",71),l.Dc(2,"..."),l.Ob(),l.Ob())}var U=function(t){return{disabled:t}};function A(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div"),l.Pb(1,"ul",63),l.Pb(2,"li",64),l.Pb(3,"a",65),l.ac("click",(function(){return l.uc(n),l.ec().onPreviousPage()})),l.Pb(4,"span",7),l.Dc(5,"\xab"),l.Ob(),l.Pb(6,"span",66),l.Dc(7,"Previous"),l.Ob(),l.Ob(),l.Ob(),l.Bc(8,T,3,0,"li",67),l.Bc(9,R,3,4,"li",68),l.Bc(10,j,3,0,"li",67),l.Pb(11,"li",64),l.Pb(12,"a",69),l.ac("click",(function(){return l.uc(n),l.ec().onNextPage()})),l.Pb(13,"span",7),l.Dc(14,"\xbb"),l.Ob(),l.Pb(15,"span",66),l.Dc(16,"Next"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(2),l.kc("ngClass",l.oc(5,U,i.page<=1)),l.xb(6),l.kc("ngIf",i.leftMore),l.xb(1),l.kc("ngForOf",i.pages),l.xb(1),l.kc("ngIf",i.rightMore),l.xb(1),l.kc("ngClass",l.oc(7,U,i.page>=i.totalPages))}}function W(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"No records found."),l.Ob())}function H(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"Loading..."),l.Ob())}function X(t,e){if(1&t&&(l.Pb(0,"div",73),l.Bc(1,W,2,0,"span",29),l.Bc(2,H,2,0,"span",29),l.Ob()),2&t){var n=l.ec();l.xb(1),l.kc("ngIf",n.loaded),l.xb(1),l.kc("ngIf",!n.loaded)}}function Y(t,e){if(1&t&&(l.Pb(0,"div",83),l.Dc(1),l.Ob()),2&t){var n=l.ec().$implicit,i=l.ec(2);l.xb(1),l.Fc(" ",n[i.titleFn]," ")}}var K=function(t){return{"grid-block-large":t}},q=function(t,e){return{"clickable-card pointer":t,"clicked-row":e}},Q=function(t){return{"grid-head-picture-large":t}};function $(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",77),l.Pb(1,"div",78),l.Pb(2,"div",79),l.ac("click",(function(){l.uc(n);var t=e.index;return l.ec(2).clickOneItem(t)})),l.Pb(3,"div",80),l.Lb(4,"lib-mdds-file-display",81),l.Ob(),l.Bc(5,Y,2,1,"div",82),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=e.$implicit,o=e.index,a=l.ec(2);l.kc("ngClass",l.oc(6,K,a.options.largePicture)),l.xb(1),l.kc("ngClass",l.pc(8,q,a.clickItemAction,a.checkedItem[o])),l.xb(2),l.kc("ngClass",l.oc(11,Q,a.options.largePicture)),l.xb(1),l.kc("downloadUrl",i[a.picturelinkFn])("isLarge",a.options.largePicture),l.xb(1),l.kc("ngIf",a.options.showTitle)}}function V(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"SUCC"),l.Ob())}function G(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"FAIL"),l.Ob())}function Z(t,e){if(1&t&&(l.Pb(0,"span"),l.Bc(1,V,2,0,"span",29),l.Bc(2,G,2,0,"span",29),l.Ob()),2&t){var n=l.ec(2).$implicit,i=l.ec(2);l.xb(1),l.kc("ngIf",i.progress[n].result.success),l.xb(1),l.kc("ngIf",!i.progress[n].result.success)}}function J(t,e){if(1&t&&(l.Pb(0,"small"),l.Dc(1),l.Pb(2,"span"),l.Dc(3),l.fc(4,"async"),l.Ob(),l.Bc(5,Z,3,2,"span",29),l.Ob()),2&t){var n=l.ec().$implicit,i=l.ec(2);l.xb(1),l.Fc("",n," "),l.xb(2),l.Fc("",l.gc(4,3,i.progress[n].progress)," "),l.xb(2),l.kc("ngIf",i.uploadSuccessful)}}function tt(t,e){if(1&t&&(l.Pb(0,"div",84),l.Bc(1,J,6,5,"small",29),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.kc("ngIf",n.progress)}}function et(t,e){if(1&t&&(l.Pb(0,"div"),l.Pb(1,"div",74),l.Bc(2,$,6,13,"div",75),l.Bc(3,tt,2,1,"div",76),l.Ob(),l.Ob()),2&t){var n=l.ec();l.xb(2),l.kc("ngForOf",n.list),l.xb(1),l.kc("ngForOf",n.uploadingFiles)}}function nt(t,e){if(1&t&&(l.Pb(0,"span"),l.Dc(1,"Total: "),l.Pb(2,"b"),l.Dc(3),l.Ob(),l.Ob()),2&t){var n=l.ec();l.xb(3),l.Ec(n.totalCount)}}function it(t,e){1&t&&(l.Pb(0,"li",70),l.Pb(1,"a",71),l.Dc(2,"..."),l.Ob(),l.Ob())}function ot(t,e){if(1&t){var n=l.Qb();l.Pb(0,"li",64),l.Pb(1,"a",72),l.ac("click",(function(){l.uc(n);var t=e.$implicit;return l.ec(2).onGotoPage(t)})),l.Dc(2),l.Ob(),l.Ob()}if(2&t){var i=e.$implicit,o=l.ec(2);l.kc("ngClass",l.oc(2,M,i==o.page)),l.xb(2),l.Ec(i)}}function at(t,e){1&t&&(l.Pb(0,"li",70),l.Pb(1,"a",71),l.Dc(2,"..."),l.Ob(),l.Ob())}function rt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div"),l.Pb(1,"ul",63),l.Pb(2,"li",64),l.Pb(3,"a",65),l.ac("click",(function(){return l.uc(n),l.ec().onPreviousPage()})),l.Pb(4,"span",7),l.Dc(5,"\xab"),l.Ob(),l.Pb(6,"span",66),l.Dc(7,"Previous"),l.Ob(),l.Ob(),l.Ob(),l.Bc(8,it,3,0,"li",67),l.Bc(9,ot,3,4,"li",68),l.Bc(10,at,3,0,"li",67),l.Pb(11,"li",64),l.Pb(12,"a",69),l.ac("click",(function(){return l.uc(n),l.ec().onNextPage()})),l.Pb(13,"span",7),l.Dc(14,"\xbb"),l.Ob(),l.Pb(15,"span",66),l.Dc(16,"Next"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(2),l.kc("ngClass",l.oc(5,U,i.page<=1)),l.xb(6),l.kc("ngIf",i.leftMore),l.xb(1),l.kc("ngForOf",i.pages),l.xb(1),l.kc("ngIf",i.rightMore),l.xb(1),l.kc("ngClass",l.oc(7,U,i.page>=i.totalPages))}}function ct(t,e){}function st(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",85),l.Lb(1,"div",86),l.Pb(2,"lib-mdds-cropper",87),l.ac("cropper",(function(t){return l.uc(n),l.ec().cropperCreated(t)})),l.Ob(),l.Lb(3,"hr"),l.Ob()}if(2&t){var i=l.ec();l.xb(2),l.kc("downloadUrl",i.croppingPictureLink)("aspectRatio",i.options.aspectRatio)}}function lt(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"SUCC"),l.Ob())}function ht(t,e){1&t&&(l.Pb(0,"span"),l.Dc(1,"FAIL"),l.Ob())}function dt(t,e){if(1&t&&(l.Pb(0,"span"),l.Bc(1,lt,2,0,"span",29),l.Bc(2,ht,2,0,"span",29),l.Ob()),2&t){var n=l.ec(2).$implicit,i=l.ec(2);l.xb(1),l.kc("ngIf",i.progress[n].result.success),l.xb(1),l.kc("ngIf",!i.progress[n].result.success)}}function ut(t,e){if(1&t&&(l.Pb(0,"small"),l.Pb(1,"span"),l.Dc(2),l.fc(3,"async"),l.Ob(),l.Bc(4,dt,3,2,"span",29),l.Ob()),2&t){var n=l.ec().$implicit,i=l.ec(2);l.xb(2),l.Fc("",l.gc(3,2,i.progress[n].progress),"% "),l.xb(2),l.kc("ngIf",i.uploadSuccessful)}}function pt(t,e){if(1&t&&(l.Pb(0,"div",93),l.Bc(1,ut,5,4,"small",29),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.kc("ngIf",n.progress)}}function gt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",88),l.Pb(1,"div",89),l.Pb(2,"button",90),l.ac("click",(function(){return l.uc(n),l.ec().selectItemConfirmed()})),l.Dc(3,"Finish"),l.Ob(),l.Pb(4,"button",24),l.ac("click",(function(){return l.uc(n),l.ec().backSelect()})),l.Dc(5,"Back"),l.Ob(),l.Ob(),l.Pb(6,"div",91),l.Bc(7,pt,2,1,"div",92),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(7),l.kc("ngForOf",i.uploadingFiles)}}var ft="table[_ngcontent-%COMP%]{margin-top:.5rem;table-layout:fixed;word-wrap:break-word}.selected-row[_ngcontent-%COMP%]{background-color:#c9f5eb}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{white-space:nowrap;width:8%}.line-breaker[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;height:0;margin:20px 0;width:100%}.gridview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.grid-block[_ngcontent-%COMP%]{align-self:stretch;display:inline-block;margin:1rem;overflow-wrap:break-word;width:18rem;word-break:break-word}.grid-fields[_ngcontent-%COMP%]{height:100%}.grid-head[_ngcontent-%COMP%]{align-items:center;background-color:rgba(0,0,0,.04);display:inline-flex;width:100%}.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:3rem;width:3rem}@media screen and (min-width:500px){.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:6rem;width:6rem}}.list-block[_ngcontent-%COMP%]{margin:.5rem;overflow-wrap:break-word;width:100%;word-break:break-word}.list-card[_ngcontent-%COMP%]{align-items:center;display:flex;flex-flow:wrap;padding:.5rem}.list-fields[_ngcontent-%COMP%]{align-items:flex-start;display:inline-flex;max-width:85%;min-width:300px}.list-devider-gradient[_ngcontent-%COMP%]{background:#095484;background-image:linear-gradient(90deg,#ccc,#095484,#ccc);border:0;height:2px}.list-devider[_ngcontent-%COMP%]{width:80%}.clickable-card[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.075)}.card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .list-body-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.card-action-icons[_ngcontent-%COMP%]{bottom:0;margin-left:auto;right:.5rem;text-align:right;width:10rem}.card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-action-icons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c4bfbf}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   i.fa-edit[_ngcontent-%COMP%]:hover, tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   i.fa-edit[_ngcontent-%COMP%]:hover{color:#00f}.clickable-card[_ngcontent-%COMP%]:hover   .card-action-icons[_ngcontent-%COMP%]   i.fa-trash-alt[_ngcontent-%COMP%]:hover, tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   i.fa-trash-alt[_ngcontent-%COMP%]:hover{color:red}.action-buttons[_ngcontent-%COMP%]{float:right;text-align:right;width:100%}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin-left:1rem}.pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:2.8rem}.total_counts[_ngcontent-%COMP%]{padding-top:.8rem;text-align:right}[_ngcontent-%COMP%]::-ms-clear{display:none}.icon-clear[_ngcontent-%COMP%]{cursor:pointer;margin-top:.5rem}.icon-clear-inside[_ngcontent-%COMP%]{border:0;cursor:pointer;margin-left:-2rem;padding:.5rem .5rem 0;position:relative;vertical-align:middle;z-index:3}.icon-clear-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem}.pointer[_ngcontent-%COMP%]{cursor:pointer}.ref-badge[_ngcontent-%COMP%]{background-color:#eceff3;border:1px solid #eceff3}.refine-search-text[_ngcontent-%COMP%]{color:#868181;font-size:.8rem}.select-model[_ngcontent-%COMP%]{background-color:#000;background-color:rgba(0,0,0,.4);display:block;height:100%;left:0;overflow:auto;padding-top:100px;position:fixed;top:0;width:100%;z-index:1000}.select-model.show[_ngcontent-%COMP%]{display:block}.select-model-content[_ngcontent-%COMP%]{background-color:#fefefe;border:1px solid #888;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);float:right;margin-right:50px;padding:0;position:relative;width:60%}.single-line-edit[_ngcontent-%COMP%] > .row[_ngcontent-%COMP%]{padding-bottom:2px}.custom-day[_ngcontent-%COMP%]{display:inline-block;height:2rem;padding:.185rem .25rem;text-align:center;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:rgba(2,117,216,.5)}.date-selection-pop[_ngcontent-%COMP%]{background-clip:padding-box;background-color:#fff;border:solid\xa0#dfdfdf;border-radius:.25rem;color:#212529;display:block;float:left;font-size:1rem;left:0;list-style:none;margin:.125rem 0 0;min-width:10rem;position:absolute;text-align:left;top:100%;z-index:1000}.add-area[_ngcontent-%COMP%]{margin-left:.75rem;margin-top:1rem}.badge-click[_ngcontent-%COMP%]{cursor:pointer}div.badge-click[_ngcontent-%COMP%]:hover{background-color:#495057!important;text-decoration:underline}.view-radio[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#bbbdbf;cursor:pointer;display:inline-block;font-size:1.5rem;font-weight:600;margin:0 1rem 0 0;transition:all .2s ease-in-out}.view-radio[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover, .view-radio[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#212529}.view-radio[_ngcontent-%COMP%]{display:none}.list-title[_ngcontent-%COMP%]{font-size:1.5rem}.sort-selection[_ngcontent-%COMP%]{min-width:200px;position:relative}.sort-dropdown[_ngcontent-%COMP%]{text-align:left;width:100%}.category2-dropdown[_ngcontent-%COMP%]{color:#007bff;font-size:1.1rem;text-align:left;width:250px}.sort-selection[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:2rem}.sort-selection[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .th-sort-arrow[_ngcontent-%COMP%]{color:#007bff;margin-left:1rem}.read-more[_ngcontent-%COMP%], .read-more-in-table[_ngcontent-%COMP%]{color:#307bff;cursor:pointer}.read-more-in-table[_ngcontent-%COMP%]{font-size:.75rem;margin-top:1rem}.read-more-in-table[_ngcontent-%COMP%]:hover, .read-more[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.no-records[_ngcontent-%COMP%]{font-size:1.25rem;margin:1rem auto;width:20rem}.list-selection[_ngcontent-%COMP%]{max-width:500px;width:90%}.modal-back[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);height:100%;left:0;min-height:100vh;overflow-y:auto;position:fixed;top:0;width:100vw;z-index:9}.modal-front[_ngcontent-%COMP%]{left:50%;margin-bottom:100px;margin-top:100px;min-width:500px;position:relative;transform:translate(-50%);width:50%}.category-nav[_ngcontent-%COMP%]{background:linear-gradient(180deg,#e9ecef,rgba(233,236,239,.2) 80%);margin-bottom:1rem;padding:1rem 20px}.slide-image[_ngcontent-%COMP%]{width:100%}.asso-link[_ngcontent-%COMP%]{font-size:.8rem;font-style:italic}.nohref-link[_ngcontent-%COMP%]{color:#007bff!important;cursor:pointer}.nohref-link[_ngcontent-%COMP%]:hover{color:#0056b3!important}.nohref-link.active[_ngcontent-%COMP%], .nohref-link.active[_ngcontent-%COMP%]:hover{color:#fff!important}.list-check-box[_ngcontent-%COMP%]{zoom:1.35}";function bt(t,e){if(1&t&&(l.Lb(0,"img",9),l.fc(1,"SafeUrlPipe")),2&t){var n=l.ec(2);l.kc("src",l.gc(1,1,n.getDownloadUrl()),l.vc)}}function mt(t,e){1&t&&l.Lb(0,"i",10)}function vt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",2),l.Pb(1,"div",3),l.Pb(2,"div",4),l.Bc(3,bt,2,3,"img",5),l.Bc(4,mt,1,0,"i",6),l.Ob(),l.Ob(),l.Pb(5,"div",7),l.Pb(6,"button",8),l.ac("click",(function(){return l.uc(n),l.ec().selectFileList()})),l.Dc(7,"Select"),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.ec();l.xb(3),l.kc("ngIf",i.downloadUrl),l.xb(1),l.kc("ngIf",!i.downloadUrl)}}function wt(t,e){}function Ot(t,e){1&t&&l.Lb(0,"div",12)}function yt(t,e){if(1&t&&(l.Pb(0,"h4",13),l.Dc(1),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.Fc("",n.action," Picture Group")}}function Pt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",21),l.ac("click",(function(){return l.uc(n),l.ec(4).clearValueFromDetail("name")})),l.Lb(1,"i",22),l.Ob()}}function xt(t,e){1&t&&(l.Pb(0,"div"),l.Dc(1," Name is required. "),l.Ob())}function Ct(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div"),l.Pb(1,"fieldset",14),l.Pb(2,"label",15),l.Dc(3,"Name"),l.Ob(),l.Pb(4,"div",16),l.Pb(5,"input",17,18),l.ac("ngModelChange",(function(t){return l.uc(n),l.ec(3).detail.name=t})),l.Ob(),l.Bc(7,Pt,2,0,"div",19),l.Ob(),l.Pb(8,"div",20),l.Bc(9,xt,2,0,"div",8),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.sc(6),o=l.ec(3);l.xb(5),l.kc("ngModel",o.detail.name),l.xb(2),l.kc("ngIf",o.detail.name),l.xb(1),l.kc("hidden",i.valid||i.pristine||i.errors.minlength),l.xb(1),l.kc("ngIf",i.errors&&i.errors.required)}}function Mt(t,e){if(1&t&&(l.Pb(0,"div"),l.Bc(1,Ct,10,4,"div",8),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.kc("ngIf",!n.hiddenFields.includes("name"))}}function kt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",21),l.ac("click",(function(){return l.uc(n),l.ec(4).clearValueFromDetail("name")})),l.Lb(1,"i",22),l.Ob()}}function Dt(t,e){1&t&&(l.Pb(0,"div"),l.Dc(1," Name is required. "),l.Ob())}function _t(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div"),l.Pb(1,"fieldset",14),l.Pb(2,"label",15),l.Dc(3,"Name"),l.Ob(),l.Pb(4,"div",16),l.Pb(5,"input",17,18),l.ac("ngModelChange",(function(t){return l.uc(n),l.ec(3).detail.name=t})),l.Ob(),l.Bc(7,kt,2,0,"div",19),l.Ob(),l.Pb(8,"div",20),l.Bc(9,Dt,2,0,"div",8),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.sc(6),o=l.ec(3);l.xb(5),l.kc("ngModel",o.detail.name),l.xb(2),l.kc("ngIf",o.detail.name),l.xb(1),l.kc("hidden",i.valid||i.pristine||i.errors.minlength),l.xb(1),l.kc("ngIf",i.errors&&i.errors.required)}}function It(t,e){if(1&t&&(l.Pb(0,"div"),l.Bc(1,_t,10,4,"div",8),l.Ob()),2&t){var n=l.ec(2);l.xb(1),l.kc("ngIf",!n.hiddenFields.includes("name"))}}function Bt(t,e){if(1&t){var n=l.Qb();l.Pb(0,"div",1),l.Bc(1,Ot,1,0,"div",2),l.Pb(2,"div",3),l.Pb(3,"div",4),l.Bc(4,yt,2,1,"h4",5),l.Pb(5,"form",6,7),l.ac("ngSubmit",(function(){return l.uc(n),l.ec().onSubmit()})),l.Bc(7,Mt,2,1,"div",8),l.Bc(8,It,2,1,"div",8),l.Pb(9,"div",9),l.Pb(10,"button",10),l.Dc(11,"Submit"),l.Ob(),l.Pb(12,"button",11),l.ac("click",(function(){return l.uc(n),l.ec().editCancel()})),l.Dc(13,"Cancel"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var i=l.sc(6),o=l.ec();l.xb(1),l.kc("ngIf",!o.embeddedView),l.xb(3),l.kc("ngIf",!o.embeddedView),l.xb(3),l.kc("ngIf","Edit"==o.action),l.xb(1),l.kc("ngIf","Create"==o.action||"Add"==o.action),l.xb(2),l.kc("disabled",!i.form.valid)}}var Ft=new l.q("FILE_UPLOAD_URI",{providedIn:"root",factory:function(){return"/api/files/upload"}}),St=new l.q("FILE_MANAGE_ROOT_URI",{providedIn:"root",factory:function(){return"/api/files"}}),Lt=function(){var t=function(){function t(e,n){r(this,t),this.fileUploadUrl=e,this.http=n}return s(t,[{key:"upload",value:function(t,e){var n=this,i={};return t.forEach((function(t){var o={group:e,name:t.name},a=new FormData;a.append("file",t,JSON.stringify(o));var r=new h.h("POST",n.fileUploadUrl,a,{reportProgress:!0}),c=new d.a,s={success:!1,value:null};n.http.request(r).subscribe((function(t){if(t.type===h.e.UploadProgress){var e=Math.round(100*t.loaded/t.total);c.next(e)}else t instanceof h.i&&(s.success=!0,s.value=t.body,c.complete())}),(function(t){s.success=!1,t instanceof h.d&&(s.value=t.error),c.complete()}),(function(){})),i[t.name]={progress:c.asObservable(),result:s}})),i}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Xb(Ft),l.Xb(h.b))},t.\u0275prov=l.Gb({token:t,factory:t.\u0275fac}),t}(),Nt=function(){var t=function(){function t(){r(this,t),this.isLarge=!1,this.style={},this.embeddedPicture=!1}return s(t,[{key:"ngOnInit",value:function(){}},{key:"getDownloadUrl",value:function(){var t=this.downloadUrl;return t&&!t.startsWith("data:")&&(t=this.isLarge?t:t+"_thumbnail"),t}},{key:"showImageDetail",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Eb({type:t,selectors:[["lib-mdds-file-display"]],inputs:{isLarge:"isLarge",style:"style",downloadUrl:"downloadUrl",clickToShow:"clickToShow",aspectRatio:"aspectRatio"},decls:2,vars:1,consts:[[2,"width","100%","height","100%"],["class","thumbnail",3,"ngStyle",4,"ngIf"],[1,"thumbnail",3,"ngStyle"],[3,"src","ngStyle"]],template:function(t,e){1&t&&(l.Pb(0,"div",0),l.Bc(1,P,3,5,"div",1),l.Ob()),2&t&&(l.xb(1),l.kc("ngIf",e.downloadUrl))},directives:function(){return[p.u,p.x]},pipes:function(){return[qt]},styles:[".thumbnail[_ngcontent-%COMP%]{height:100%;overflow:hidden;width:100%}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;left:50%;position:relative;transform:translateX(-50%);width:auto}"]}),t}(),zt=function(t){e(o,t);var n=i(o);function o(t,e){return r(this,o),n.call(this,t,e+"/mfile/")}return o}(f.c),Et=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e){var i;return r(this,o),(i=n.call(this,t,e)).filesServerRootUri=e,i}return s(o,[{key:"ngOnDestroy",value:function(){}}]),o}(zt);return t.\u0275fac=function(e){return new(e||t)(l.Xb(h.b),l.Xb(St))},t.\u0275prov=l.Gb({token:t,factory:t.\u0275fac}),t}(),Tt=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e,i,a,c,s){var l;return r(this,o),(l=n.call(this,e,i,a,c,s)).componentFactoryResolver=t,l.mfileService=e,l.injector=i,l.router=a,l.route=c,l.location=s,l.setItemNames("picture"),l.briefFieldsInfo=[],l.briefFieldsInfo.push(["name","Name"]),l.briefFieldsInfo.push(["type","Type"]),l.briefFieldsInfo.push(["group","Group"]),l.briefFieldsInfo.push(["labels","Labels"]),l.briefFieldsInfo.push(["size","Size"]),l.briefFieldsInfo.push(["link","Link"]),l.briefFieldsInfo.push(["createdAt","Created at"]),l.briefFieldsInfo.push(["hasThumbnail","Has Thumbnail"]),l.referenceFieldsMap={group:"mfilegroup"},l.referenceFieldsReverseMap={mfilegroup:"group"},l.schemaName="mfile",l.dateFormat="MM/DD/YYYY",l.timeFormat="hh:mm:ss",l.modulePath="files",l.indexFields=["name"],l}return o}(f.b);return t.\u0275fac=function(e){return new(e||t)(l.Kb(l.j),l.Kb(Et),l.Kb(l.r),l.Kb(g.d),l.Kb(g.a),l.Kb(p.o))},t.\u0275cmp=l.Eb({type:t,selectors:[["ng-component"]],features:[l.ub],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t}(),Rt=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e,i,a,c,s){var h;r(this,o),(h=n.call(this,t,e,i,a,c,s)).componentFactoryResolver=t,h.mfileService=e,h.injector=i,h.router=a,h.route=c,h.location=s,h.minDate={year:(new Date).getFullYear()-100,month:1,day:1},h.done=new l.n,h.view=f.i.LIST,h.stringFields.push("name"),h.stringFields.push("type"),h.stringFields.push("link"),h.referenceFields=["group"],h.dateFields=["createdAt"],h.arrayFields=[["labels","SchemaString"]],h.listViewFilter="list";var d=[{listCategoryField:"group",showCategoryCounts:!0,showEmptyCategory:!0,listCategoryRef:"mfilegroup"}];return h.listCategory1=d[0]||{},h.listCategory2=d[1]||{},h}return s(o,[{key:"ngOnInit",value:function(){this.adjustListViewForWindowSize(),this.detail=this.formatDetail(this.searchObj||{}),this.populateList()}}],[{key:"getInstance",value:function(){return new o(null,null,null,null,null,null)}}]),o}(Tt);return t.\u0275fac=function(e){return new(e||t)(l.Kb(l.j),l.Kb(Et),l.Kb(l.r),l.Kb(g.d),l.Kb(g.a),l.Kb(p.o))},t.\u0275cmp=l.Eb({type:t,selectors:[["lib-mfile-list"]],inputs:{inputData:"inputData",searchObj:"searchObj",categoryBy:"categoryBy"},outputs:{done:"done"},features:[l.ub],decls:0,vars:0,template:function(t,e){},styles:[ft]}),t}(),jt=function(){var n=function(n){e(c,n);var o=i(c);function c(t,e,n,i,a,s){var l;return r(this,c),(l=o.call(this,null,t,e,n,i,a)).mfileService=t,l.injector=e,l.router=n,l.route=i,l.location=a,l.uploadService=s,l.options={},l.files=new Set,l.canBeClosed=!0,l.showCancelButton=!0,l.uploading=!1,l.uploadSuccessful=!0,l.selectNew=!1,l.uploadingFiles=[],l.majorUi=!1,l}return s(c,[{key:"ngOnInit",value:function(){!Array.isArray(this.inputData)||this.inputData.length<2?console.error("inputData of array is expected for gallery view: titleFn, picturelinkFn"):(this.stepTitle="Select "+this.ItemCamelName,this.titleFn=this.inputData[0],this.picturelinkFn=this.inputData[1],this.clickItemAction="select",this.itemMultiSelect=!1,this.urlCate1="MddsUncategorized",t(a(c.prototype),"ngOnInit",this).call(this))}},{key:"selectFiles",value:function(){this.selectNew=!0,this.file.nativeElement.click()}},{key:"onFilesSelected",value:function(){var t=this;(this.uploadSuccessful||this.selectNew)&&(this.files=new Set,this.uploadSuccessful=!1,this.selectNew=!1,this.progress=void 0,this.uploadingFiles=[]);var e=this.file.nativeElement.files;for(var n in e)isNaN(parseInt(n,10))||(this.files.add(e[n]),this.uploadingFiles.push(e[n].name));this.uploadFiles(null,(function(){for(var e=0,n=Object.keys(t.progress);e<n.length;e++){var i=n[e];t.progress[i].result.success?(t.list.push(t.formatDetail(t.progress[i].result.value)),t.categoriesCounts[t.selectedCategory]+=1):t.uploadingFiles.push(i)}}))}},{key:"uploadFiles",value:function(t,e){var n=this;this.uploading=!0;var i=this.categories[this.selectedCategory].group._id;i===f.h&&(i=null),t&&(i=t),this.progress=this.uploadService.upload(this.files,i);for(var o=[],a=0,r=Object.keys(this.progress);a<r.length;a++){var c=r[a];o.push(this.progress[c].progress)}this.canBeClosed=!1,this.showCancelButton=!1,Object(u.a)(o).subscribe((function(t){n.canBeClosed=!0,n.uploadSuccessful=!0,n.localImage=null,n.uploading=!1,n.uploadingFiles=[],n.files=new Set,e&&e()}))}},{key:"onGroupAdded",value:function(t){t&&(this.categoryDisplays.push(t.name),this.categories.push({group:t}),this.categoriesCounts.push(0))}},{key:"onActionDone",value:function(t){this.isAdding=!1}},{key:"selectConfirmed",value:function(){this.uploadingFiles=[];var t=this.getSelectedItems()[0];this.croppingPictureLink=t.link,this.selectedFileName=t._id,this.stepTitle="Crop Picture"}},{key:"cropperCreated",value:function(t){this.cropper=t}},{key:"selectItemConfirmed",value:function(){var t=this;this.cropper.getCroppedCanvas().toBlob((function(e){var n=e;n.lastModifiedDate=new Date,n.name=t.selectedFileName;var i=e;t.uploadSuccessful=!1,t.selectNew=!1,t.progress=void 0,t.files=new Set,t.uploadingFiles=[],t.files.add(i),t.uploadingFiles.push(i.name),t.uploadFiles("mdds-file-crop",(function(){t.progress[i.name].result.success?(t.outputData={action:"selected",detail:t.progress[i.name].result.value,value:void 0},t.done.emit(!0)):t.uploadingFiles.push(i.name)}))}),"image/jpeg",.9)}},{key:"backSelect",value:function(){this.croppingPictureLink=void 0,this.stepTitle="Select "+this.ItemCamelName,this.uploadingFiles=[]}}]),c}(Rt);return n.\u0275fac=function(t){return new(t||n)(l.Kb(Et),l.Kb(l.r),l.Kb(g.d),l.Kb(g.a),l.Kb(p.o),l.Kb(Lt))},n.\u0275cmp=l.Eb({type:n,selectors:[["lib-mfile-list-widget-gallery"]],viewQuery:function(t,e){var n;1&t&&(l.zc(x,!0),l.zc(y,!0)),2&t&&(l.rc(n=l.bc())&&(e.focusEl=n.first),l.rc(n=l.bc())&&(e.file=n.first))},inputs:{options:"options"},features:[l.ub],decls:58,vars:15,consts:[["tabindex","0",1,"select-model","show",3,"keyup.esc"],["FilesModal",""],[1,"select-model-content"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"select-picture",3,"hidden"],["class","nav nav-pills category-nav",4,"ngIf"],[1,"main-area"],[1,"container","search"],[1,"row"],[1,"col-9"],[1,"input-group"],["type","search","id","mfileTextSearch","placeholder","Search for name",1,"form-control","border","border-secondary",3,"ngModel","ngModelChange","keydown.enter"],["mfileTextSearch",""],["class","input-group-append icon-clear-inside",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-search"],[1,"action-buttons"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"row","justify-content-end","mt-3"],["class","sort-selection mr-5",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"total_counts"],[4,"ngIf"],[1,"ml-3",3,"click"],[1,"fa","fa-sync-alt"],[1,"d-flex","justify-content-center","mt-2"],["class","no-records",4,"ngIf"],[1,"container"],["type","file","multiple","",2,"display","none",3,"change"],["file",""],["files-ref-select",""],["class","crop-area",4,"ngIf"],["class","crop-actions",4,"ngIf"],[1,"modal-footer"],[1,"nav","nav-pills","category-nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"li-add"],["routerLink",".",1,"pointer",3,"click"],["title","Add",1,"fas","fa-plus-square"],["class","add-group-pop",4,"ngIf"],[1,"nav-item"],["class","nav-link","queryParamsHandling","preserve",3,"ngClass","routerLink","click",4,"ngIf"],["queryParamsHandling","preserve",1,"nav-link",3,"ngClass","routerLink","click"],[1,"add-group-pop"],[3,"initData","embeddedView","embedMode","done","doneData"],[1,"input-group-append","icon-clear-inside"],["title","Clear",1,"fas","fa-times-circle",3,"click"],[1,"sort-selection","mr-5"],[1,"dropdown",2,"width","100%"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"sort-dropdown","btn","btn-light","btn-sm","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item","pointer",3,"click"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],["class","fas fa-arrow-up",4,"ngIf"],["class","fas fa-arrow-down",4,"ngIf"],[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["routerLink",".","aria-label","Previous",1,"page-link",3,"click"],[1,"sr-only"],["class","page-item",4,"ngIf"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["routerLink",".","aria-label","Next",1,"page-link",3,"click"],[1,"page-item"],[1,"page-link"],["routerLink",".",1,"page-link",3,"click"],[1,"no-records"],[1,"galleryView"],["class","grid-block",3,"ngClass",4,"ngFor","ngForOf"],["class","grid-block",4,"ngFor","ngForOf"],[1,"grid-block",3,"ngClass"],[1,"text-left","h-100",3,"ngClass"],[1,"grid-fields",3,"click"],[1,"grid-head-picture",3,"ngClass"],[3,"downloadUrl","isLarge"],["class","grid-picture-name",4,"ngIf"],[1,"grid-picture-name"],[1,"grid-block"],[1,"crop-area"],[1,"crop-area-ratio"],[1,"crop-area-box",3,"downloadUrl","aspectRatio","cropper"],[1,"crop-actions"],[1,"action-buttons","text-center"],["type","button",1,"btn","btn-success",3,"click"],[1,"d-flex","justify-content-center"],["class","mx-3",4,"ngFor","ngForOf"],[1,"mx-3"]],template:function(t,e){1&t&&(l.Pb(0,"div",0,1),l.ac("keyup.esc",(function(){return e.uiOnEscapeKey()})),l.Pb(2,"div",2),l.Pb(3,"div",3),l.Pb(4,"div",4),l.Pb(5,"h5",5),l.Dc(6),l.Ob(),l.Pb(7,"button",6),l.ac("click",(function(){return e.uiCloseModal()})),l.Pb(8,"span",7),l.Dc(9,"\xd7"),l.Ob(),l.Ob(),l.Ob(),l.Pb(10,"div",8),l.Pb(11,"div",9),l.Bc(12,B,7,2,"ul",10),l.Pb(13,"div",11),l.Pb(14,"div",12),l.Pb(15,"div",13),l.Pb(16,"div",14),l.Pb(17,"div",15),l.Pb(18,"input",16,17),l.ac("ngModelChange",(function(t){return e.searchText=t}))("keydown.enter",(function(t){return t.target.blur(),e.searchList(),!1})),l.Ob(),l.Bc(20,F,3,0,"div",18),l.Pb(21,"div",19),l.Pb(22,"button",20),l.ac("click",(function(){return e.searchList()})),l.Lb(23,"i",21),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Lb(24,"hr"),l.Pb(25,"div",22),l.Pb(26,"button",23),l.ac("click",(function(){return e.selectConfirmed()})),l.Dc(27,"Confirm Selection"),l.Ob(),l.Pb(28,"button",24),l.ac("click",(function(){return e.selectFiles()})),l.Dc(29,"Upload New"),l.Ob(),l.Ob(),l.Pb(30,"div",25),l.Bc(31,z,12,1,"div",26),l.Ob(),l.Pb(32,"div",27),l.Lb(33,"div"),l.Pb(34,"div"),l.Pb(35,"div",28),l.Bc(36,E,4,1,"span",29),l.Pb(37,"a",30),l.ac("click",(function(){return e.onRefresh()})),l.Lb(38,"i",31),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(39,"div",32),l.Bc(40,A,17,9,"div",29),l.Ob(),l.Ob(),l.Bc(41,X,3,2,"div",33),l.Bc(42,et,4,2,"div",29),l.Pb(43,"div",34),l.Lb(44,"div",25),l.Pb(45,"div",27),l.Lb(46,"div"),l.Pb(47,"div"),l.Pb(48,"div",28),l.Bc(49,nt,4,1,"span",29),l.Ob(),l.Ob(),l.Ob(),l.Pb(50,"div",32),l.Bc(51,rt,17,9,"div",29),l.Ob(),l.Ob(),l.Ob(),l.Pb(52,"input",35,36),l.ac("change",(function(){return e.onFilesSelected()})),l.Ob(),l.Bc(54,ct,0,0,"ng-template",37),l.Ob(),l.Bc(55,st,4,2,"div",38),l.Bc(56,gt,8,1,"div",39),l.Ob(),l.Lb(57,"div",40),l.Ob(),l.Ob(),l.Ob()),2&t&&(l.xb(6),l.Ec(e.stepTitle),l.xb(5),l.kc("hidden",e.croppingPictureLink),l.xb(1),l.kc("ngIf",e.listCategory1.listCategoryField),l.xb(6),l.kc("ngModel",e.searchText),l.xb(2),l.kc("ngIf",e.searchText),l.xb(6),l.kc("disabled",!e.isItemSelected()),l.xb(5),l.kc("ngIf",e.list.length>2),l.xb(5),l.kc("ngIf",e.list.length>2),l.xb(4),l.kc("ngIf",e.totalPages>1),l.xb(1),l.kc("ngIf",0===e.list.length),l.xb(1),l.kc("ngIf",e.list.length>0),l.xb(7),l.kc("ngIf",e.list.length>2),l.xb(2),l.kc("ngIf",e.totalPages>1),l.xb(4),l.kc("ngIf",e.croppingPictureLink),l.xb(1),l.kc("ngIf",e.croppingPictureLink))},directives:function(){return[p.u,b.c,b.p,b.s,p.t,g.g,p.r,Yt,Nt,Kt]},pipes:function(){return[p.b]},styles:[ft,".galleryView[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.grid-block[_ngcontent-%COMP%]{align-self:stretch;display:inline-block;margin:1rem;overflow-wrap:break-word;width:10rem;word-break:break-word}.grid-block-large[_ngcontent-%COMP%]{width:20rem}.grid-fields[_ngcontent-%COMP%]{height:100%}.grid-head[_ngcontent-%COMP%]{align-items:center;background-color:rgba(0,0,0,.04);display:inline-flex;width:100%}.grid-head-picture[_ngcontent-%COMP%], .list-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:3rem;width:3rem}@media screen and (min-width:500px){.grid-head-picture[_ngcontent-%COMP%]{background-color:#f1f1f1;height:6rem;width:100%}.grid-head-picture-large[_ngcontent-%COMP%]{height:12rem}}.clicked-row[_ngcontent-%COMP%]{background-color:rgba(167,224,169,.175);box-shadow:0 0 0 2px #44b549}.grid-picture-name[_ngcontent-%COMP%]{font-size:.75rem;margin:2px}.action-buttons[_ngcontent-%COMP%]{float:none}.select-model-content[_ngcontent-%COMP%]{width:80%}.nav-link[_ngcontent-%COMP%]{font-size:.9rem;padding:.25rem 1rem}.modal-body[_ngcontent-%COMP%]{align-items:center;justify-content:center}.category-nav[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.main-area[_ngcontent-%COMP%]{flex-grow:1}.li-add[_ngcontent-%COMP%]{position:relative}.add-group-pop[_ngcontent-%COMP%]{position:absolute;width:400px;z-index:30}.select-picture[_ngcontent-%COMP%]{display:flex;width:100%}.crop-area[_ngcontent-%COMP%]{position:relative;width:80%}.crop-area-ratio[_ngcontent-%COMP%]{margin-top:56.25%}.crop-area-box[_ngcontent-%COMP%]{background-color:silver;bottom:0;left:0;position:absolute;right:0;top:0}.crop-actions[_ngcontent-%COMP%]{margin-top:.5rem;width:100%}.crop-image[_ngcontent-%COMP%]{display:block;max-width:100%}"]}),n}(),Ut=function(){var t=function t(e){r(this,t),this.viewContainerRef=e};return t.\u0275fac=function(e){return new(e||t)(l.Kb(l.O))},t.\u0275dir=l.Fb({type:t,selectors:[["","libMddsFileSelect",""]]}),t}(),At=function(){var t=function(){function t(e){r(this,t),this.componentFactoryResolver=e,this.disableDisplay=!1,this.askForSelect=!1,this.downloadUrlChange=new l.n}return s(t,[{key:"ngOnInit",value:function(){}},{key:"getDownloadUrl",value:function(){var t=this.downloadUrl;return t&&!t.startsWith("data:")?t+"_thumbnail":t}},{key:"ngOnChanges",value:function(t){t.askForSelect&&!0===t.askForSelect.currentValue&&this.selectFileList()}},{key:"selectFileList",value:function(){var t=this,e=this.refSelectDirective.viewContainerRef;e.clear();var n=this.componentFactoryResolver.resolveComponentFactory(jt),i=e.createComponent(n).instance;i.setFocus(),i.inputData=["name","link"],i.options={canSelect:!0,largePicture:!1,showTitle:!0,aspectRatio:this.aspectRatio},this.componentSubscription=i.done.subscribe((function(n){var o=i.outputData;if(o)switch(o.action){case"selected":t.downloadUrl=o.detail.link,t.downloadUrlChange.emit(t.downloadUrl)}n&&(t.componentSubscription.unsubscribe(),e.clear())}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Kb(l.j))},t.\u0275cmp=l.Eb({type:t,selectors:[["lib-mdds-file-select"]],viewQuery:function(t,e){var n;1&t&&l.zc(Ut,!0),2&t&&l.rc(n=l.bc())&&(e.refSelectDirective=n.first)},inputs:{disableDisplay:"disableDisplay",askForSelect:"askForSelect",downloadUrl:"downloadUrl",aspectRatio:"aspectRatio"},outputs:{downloadUrlChange:"downloadUrlChange"},features:[l.vb],decls:2,vars:1,consts:[["style","width: 100%;",4,"ngIf"],["libMddsFileSelect",""],[2,"width","100%"],[1,"display-file"],[1,"thumbnail"],[3,"src",4,"ngIf"],["class","far fa-image",4,"ngIf"],[1,"select-file"],["type","button",1,"btn","btn-link","ml-2",3,"click"],[3,"src"],[1,"far","fa-image"]],template:function(t,e){1&t&&(l.Bc(0,vt,8,2,"div",0),l.Bc(1,wt,0,0,"ng-template",1)),2&t&&l.kc("ngIf",!e.disableDisplay)},directives:function(){return[p.u,Ut]},pipes:function(){return[qt]},styles:[".thumbnail[_ngcontent-%COMP%], .thumbnail-local[_ngcontent-%COMP%]{height:100%;overflow:hidden;width:100%}.thumbnail-local[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;padding:1px}.thumbnail-local[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:50%;position:relative;transform:translateX(-50%)}.thumbnail[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:6rem}.display-file[_ngcontent-%COMP%]{display:inline-block;width:50%}.select-file[_ngcontent-%COMP%]{display:inline-block;max-width:50%;padding-left:.75rem}"]}),t}(),Wt=function(t){e(o,t);var n=i(o);function o(t,e){return r(this,o),n.call(this,t,e+"/mfilegroup/")}return o}(f.c),Ht=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e){var i;return r(this,o),(i=n.call(this,t,e)).filesServerRootUri=e,i}return s(o,[{key:"ngOnDestroy",value:function(){}}]),o}(Wt);return t.\u0275fac=function(e){return new(e||t)(l.Xb(h.b),l.Xb(St))},t.\u0275prov=l.Gb({token:t,factory:t.\u0275fac}),t}(),Xt=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e,i,a,c){var s;return r(this,o),(s=n.call(this,t,e,i,a,c)).mfilegroupService=t,s.injector=e,s.router=i,s.route=a,s.location=c,s.setItemNames("picture Group"),s.briefFieldsInfo=[],s.briefFieldsInfo.push(["name","Name"]),s.requiredFields=["name"],s.schemaName="mfilegroup",s.dateFormat="MM/DD/YYYY",s.timeFormat="hh:mm:ss",s.modulePath="files",s.indexFields=["name"],s}return o}(f.b);return t.\u0275fac=function(e){return new(e||t)(l.Kb(Ht),l.Kb(l.r),l.Kb(g.d),l.Kb(g.a),l.Kb(p.o))},t.\u0275cmp=l.Eb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&l.zc(x,!0),2&t&&l.rc(n=l.bc())&&(e.focusEl=n.first)},features:[l.ub],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t}(),Yt=function(){var t=function(t){e(o,t);var n=i(o);function o(t,e,i,a,c){var s;return r(this,o),(s=n.call(this,t,e,i,a,c)).mfilegroupService=t,s.injector=e,s.router=i,s.route=a,s.location=c,s.done=new l.n,s.doneData=new l.n,s.minDate={year:(new Date).getFullYear()-100,month:1,day:1},s.view=f.i.EDIT,s.stringFields.push("name"),s.detail=s.formatDetail({}),s}return s(o,[{key:"ngOnInit",value:function(){"create"==this.embedMode?(this.action="Create",this.getDetailData()):(this.id||(this.id=this.route.snapshot.paramMap.get("id")),this.id?(this.action="Edit",this.populateDetailForAction(this.id,"edit")):(this.action="Create",this.cid||(this.cid=this.route.snapshot.queryParamMap.get("cid")),this.cid?this.populateDetailFromCopy(this.cid):this.getDetailData()))}},{key:"getDetailData",value:function(){if(this.initData){this.action="Add";for(var t={},e=0,n=Object.keys(this.initData);e<n.length;e++){var i=n[e];t[i]=this.initData[i],this.hiddenFields.push(i)}this.detail=this.formatDetail(t)}else this.detail=this.formatDetail({})}}]),o}(Xt);return t.\u0275fac=function(e){return new(e||t)(l.Kb(Ht),l.Kb(l.r),l.Kb(g.d),l.Kb(g.a),l.Kb(p.o))},t.\u0275cmp=l.Eb({type:t,selectors:[["lib-mfilegroup-edit"]],inputs:{id:"id",cid:"cid",initData:"initData",embeddedView:"embeddedView",embedMode:"embedMode"},outputs:{done:"done",doneData:"doneData"},features:[l.ub],decls:1,vars:1,consts:[["class","edit",4,"ngIf"],[1,"edit"],["class","action-buttons",4,"ngIf"],[1,"card",2,"text-align","left"],[1,"card-body"],["class","card-title",4,"ngIf"],[3,"ngSubmit"],["editForm","ngForm"],[4,"ngIf"],[1,"action-buttons-center"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"action-buttons"],[1,"card-title"],[1,"form-group"],["for","EditName"],[1,"input-group"],["type","text","id","EditName","required","","name","EditName",1,"form-control","rounded",3,"ngModel","ngModelChange"],["EditName","ngModel"],["class","input-group-append icon-clear-inside ",3,"click",4,"ngIf"],[1,"alert","alert-danger",3,"hidden"],[1,"input-group-append","icon-clear-inside",3,"click"],["title","Clear",1,"fas","fa-times-circle"]],template:function(t,e){1&t&&l.Bc(0,Bt,14,5,"div",0),2&t&&l.kc("ngIf",e.detail)},directives:[p.u,b.F,b.q,b.r,b.c,b.A,b.p,b.s],styles:[".edit[_ngcontent-%COMP%]{margin:0 auto;width:75%}.alert[_ngcontent-%COMP%], .form-check[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{width:90%}.action-buttons[_ngcontent-%COMP%]{float:right;margin-bottom:1.25rem;text-align:right;width:100%}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   .fa-angle-double-left[_ngcontent-%COMP%]{display:inline-block;margin-left:2.5rem}.action-buttons[_ngcontent-%COMP%]   .fa-angle-double-left[_ngcontent-%COMP%]{float:left;margin-top:.75rem}.action-buttons-center[_ngcontent-%COMP%]{float:right;margin-bottom:1.25rem;text-align:center;width:100%}.action-buttons-center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin-left:2.5rem}.card-title[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.input-group-append[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border:1px solid #ced4da;border-bottom-left-radius:0;border-radius:.25rem;border-top-left-radius:0}.ref-badge[_ngcontent-%COMP%]{background-color:#eceff3;border:1px solid #eceff3}.icon-clear[_ngcontent-%COMP%], .icon-search[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem;pointer-events:auto;z-index:1}.pointer[_ngcontent-%COMP%]{cursor:pointer}.input-group[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:.5rem}.icon-clear-inside[_ngcontent-%COMP%]{border:0;cursor:pointer;height:2rem;margin-left:-2rem;padding:.75rem .5rem 0;position:relative;vertical-align:middle;z-index:3}.icon-clear-inside-sm[_ngcontent-%COMP%]{bottom:0;cursor:pointer;height:1.5rem;margin:auto;position:absolute;right:1.5rem;top:0;z-index:3}.icon-clear-badge[_ngcontent-%COMP%]{cursor:pointer;margin-left:1rem}"]}),t}(),Kt=function(){var t=function(){function t(){r(this,t),this.cropper=new l.n}return s(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var t=document.getElementById("mdds-cropper-container");this.cropperInstance=new w.a(t,{dragMode:"move",aspectRatio:this.aspectRatio||NaN,zoomable:!0,zoomOnWheel:!0,autoCropArea:.81}),this.cropper.emit(this.cropperInstance)}},{key:"zoomIn",value:function(){this.cropperInstance.zoom(.1)}},{key:"zoomOut",value:function(){this.cropperInstance.zoom(-.1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Eb({type:t,selectors:[["lib-mdds-cropper"]],inputs:{downloadUrl:"downloadUrl",aspectRatio:"aspectRatio"},outputs:{cropper:"cropper"},decls:7,vars:1,consts:[["id","mdds-cropper-container",2,"display","block","max-width","100%",3,"src"],[1,"zoom-items"],[1,"zoom-item","ripple",3,"click"],[1,"fas","fa-plus"],[1,"zoom-divider"],[1,"fas","fa-minus"]],template:function(t,e){1&t&&(l.Lb(0,"img",0),l.Pb(1,"div",1),l.Pb(2,"div",2),l.ac("click",(function(){return e.zoomIn()})),l.Lb(3,"i",3),l.Ob(),l.Lb(4,"div",4),l.Pb(5,"div",2),l.ac("click",(function(){return e.zoomOut()})),l.Lb(6,"i",5),l.Ob(),l.Ob()),2&t&&l.lc("src",e.downloadUrl,l.vc)},styles:['.zoom-items[_ngcontent-%COMP%]{align-items:center;background-color:#fff;border-radius:8px;bottom:1rem;cursor:pointer;display:flex;flex-direction:column;position:absolute;right:1rem;width:29px}.zoom-item[_ngcontent-%COMP%]{color:#464a4e;padding:5px}.zoom-item[_ngcontent-%COMP%]:hover{color:#212529}.zoom-divider[_ngcontent-%COMP%]{background-color:#e5e5e5;height:1px;transition:background-color .16s ease-out;width:19px}.ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative;transform:translateZ(0)}.ripple[_ngcontent-%COMP%]:after{background-image:radial-gradient(circle,#fff 10%,transparent 10.01%);background-position:50%;background-repeat:no-repeat;content:"";display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;transform:scale(10);transition:transform .5s,opacity 1s;width:100%}.ripple[_ngcontent-%COMP%]:active:after{opacity:.3;transform:scale(0);transition:0s}']}),t}(),qt=function(){var t=function(){function t(e){r(this,t),this.sanitized=e}return s(t,[{key:"transform",value:function(t){return t&&t.startsWith("data:")?this.sanitized.bypassSecurityTrustResourceUrl(t):t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Kb(O.b))},t.\u0275pipe=l.Jb({name:"SafeUrlPipe",type:t,pure:!0}),t}(),Qt=function(){var t=function t(){r(this,t)};return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(e){return new(e||t)},providers:[Lt,Et,Ht],imports:[[p.c,g.h,b.k,m.r,f.d]]}),t}()},urRO:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s="undefined"!=typeof window&&void 0!==window.document,l=s?window:{},h=!(!s||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,d=!!s&&"PointerEvent"in l,u="".concat("cropper","-crop"),p="".concat("cropper","-disabled"),g="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),b="".concat("cropper","-invisible"),m="".concat("cropper","-modal"),v="".concat("cropper","-move"),w="".concat("cropper","Action"),O="".concat("cropper","Preview"),y=d?"pointerdown":h?"touchstart":"mousedown",P=d?"pointermove":h?"touchmove":"mousemove",x=d?"pointerup pointercancel":h?"touchend touchcancel":"mouseup",C=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,M=/^data:/,k=/^data:image\/jpeg;base64,/,D=/^img|canvas$/i,_={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},I=Number.isNaN||l.isNaN;function B(t){return"number"==typeof t&&!I(t)}var F=function(t){return t>0&&t<1/0};function S(t){return void 0===t}function L(e){return"object"===t(e)&&null!==e}var N=Object.prototype.hasOwnProperty;function z(t){if(!L(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&N.call(n,"isPrototypeOf")}catch(i){return!1}}function E(t){return"function"==typeof t}var T=Array.prototype.slice;function R(t){return Array.from?Array.from(t):T.call(t)}function j(t,e){return t&&E(e)&&(Array.isArray(t)||B(t.length)?R(t).forEach((function(n,i){e.call(t,n,i,t)})):L(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var U=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return L(t)&&n.length>0&&n.forEach((function(e){L(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},A=/\.\d*(?:0|9){12}\d*$/;function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return A.test(t)?Math.round(t*e)/e:t}var H=/^width|height|left|top|marginLeft|marginTop$/;function X(t,e){var n=t.style;j(e,(function(t,e){H.test(e)&&B(t)&&(t="".concat(t,"px")),n[e]=t}))}function Y(t,e){if(e)if(B(t.length))j(t,(function(t){Y(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function K(t,e){e&&(B(t.length)?j(t,(function(t){K(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function q(t,e,n){e&&(B(t.length)?j(t,(function(t){q(t,e,n)})):n?Y(t,e):K(t,e))}var Q=/([a-z\d])([A-Z])/g;function $(t){return t.replace(Q,"$1-$2").toLowerCase()}function V(t,e){return L(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat($(e)))}function G(t,e,n){L(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat($(e)),n)}var Z=/\s\s*/,J=function(){var t=!1;if(s){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",n,i),l.removeEventListener("test",n,i)}return t}();function tt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;e.trim().split(Z).forEach((function(e){if(!J){var a=t.listeners;a&&a[e]&&a[e][n]&&(o=a[e][n],delete a[e][n],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,o,i)}))}function et(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;e.trim().split(Z).forEach((function(e){if(i.once&&!J){var a=t.listeners,r=void 0===a?{}:a;o=function(){delete r[e][n],t.removeEventListener(e,o,i);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];n.apply(t,c)},r[e]||(r[e]={}),r[e][n]&&t.removeEventListener(e,r[e][n],i),r[e][n]=o,t.listeners=r}t.addEventListener(e,o,i)}))}function nt(t,e,n){var i;return E(Event)&&E(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(i)}function it(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ot=l.location,at=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function rt(t){var e=t.match(at);return null!==e&&(e[1]!==ot.protocol||e[2]!==ot.hostname||e[3]!==ot.port)}function ct(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function st(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,o=t.translateX,a=t.translateY,r=[];B(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),B(a)&&0!==a&&r.push("translateY(".concat(a,"px)")),B(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),B(n)&&1!==n&&r.push("scaleX(".concat(n,")")),B(i)&&1!==i&&r.push("scaleY(".concat(i,")"));var c=r.length?r.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function lt(t,e){var n=t.pageX,i=t.pageY,o={endX:n,endY:i};return e?o:a({startX:n,startY:i},o)}function ht(t){var e=t.aspectRatio,n=t.height,i=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=F(i),r=F(n);if(a&&r){var c=n*e;"contain"===o&&c>i||"cover"===o&&c<i?n=i/e:i=n*e}else a?n=i/e:r&&(i=n*e);return{width:i,height:n}}function dt(t,e,n,i){var o=e.aspectRatio,a=e.naturalWidth,c=e.naturalHeight,s=e.rotate,l=void 0===s?0:s,h=e.scaleX,d=void 0===h?1:h,u=e.scaleY,p=void 0===u?1:u,g=n.aspectRatio,f=n.naturalWidth,b=n.naturalHeight,m=i.fillColor,v=void 0===m?"transparent":m,w=i.imageSmoothingEnabled,O=void 0===w||w,y=i.imageSmoothingQuality,P=void 0===y?"low":y,x=i.maxWidth,C=void 0===x?1/0:x,M=i.maxHeight,k=void 0===M?1/0:M,D=i.minWidth,_=void 0===D?0:D,I=i.minHeight,B=void 0===I?0:I,F=document.createElement("canvas"),S=F.getContext("2d"),L=ht({aspectRatio:g,width:C,height:k}),N=ht({aspectRatio:g,width:_,height:B},"cover"),z=Math.min(L.width,Math.max(N.width,f)),E=Math.min(L.height,Math.max(N.height,b)),T=ht({aspectRatio:o,width:C,height:k}),R=ht({aspectRatio:o,width:_,height:B},"cover"),j=Math.min(T.width,Math.max(R.width,a)),U=Math.min(T.height,Math.max(R.height,c)),A=[-j/2,-U/2,j,U];return F.width=W(z),F.height=W(E),S.fillStyle=v,S.fillRect(0,0,z,E),S.save(),S.translate(z/2,E/2),S.rotate(l*Math.PI/180),S.scale(d,p),S.imageSmoothingEnabled=O,S.imageSmoothingQuality=P,S.drawImage.apply(S,[t].concat(r(A.map((function(t){return Math.floor(W(t))}))))),S.restore(),F}var ut=String.fromCharCode,pt=/^data:.*,/,gt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,i=this.cropper;Y(i,g),K(t,g);var o={width:Math.max(n.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(n.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=o,X(i,{width:o.width,height:o.height}),Y(t,g),K(i,g)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,i=Math.abs(e.rotate)%180==90,o=i?e.naturalHeight:e.naturalWidth,a=i?e.naturalWidth:e.naturalHeight,r=o/a,c=t.width,s=t.height;t.height*r>t.width?3===n?c=t.height*r:s=t.width/r:3===n?s=t.width/r:c=t.height*r;var l={aspectRatio:r,naturalWidth:o,naturalHeight:a,width:c,height:s};l.left=(t.width-c)/2,l.top=(t.height-s)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=1===n||2===n,this.limitCanvas(!0,!0),this.initialImageData=U({},e),this.initialCanvasData=U({},l)},limitCanvas:function(t,e){var n=this.options,i=this.containerData,o=this.canvasData,a=this.cropBoxData,r=n.viewMode,c=o.aspectRatio,s=this.cropped&&a;if(t){var l=Number(n.minCanvasWidth)||0,h=Number(n.minCanvasHeight)||0;r>1?(l=Math.max(l,i.width),h=Math.max(h,i.height),3===r&&(h*c>l?l=h*c:h=l/c)):r>0&&(l?l=Math.max(l,s?a.width:0):h?h=Math.max(h,s?a.height:0):s&&((h=a.height)*c>(l=a.width)?l=h*c:h=l/c));var d=ht({aspectRatio:c,width:l,height:h});h=d.height,o.minWidth=l=d.width,o.minHeight=h,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(r>(s?0:1)){var u=i.width-o.width,p=i.height-o.height;o.minLeft=Math.min(0,u),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,u),o.maxTop=Math.max(0,p),s&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,2===r&&(o.width>=i.width&&(o.minLeft=Math.min(0,u),o.maxLeft=Math.max(0,u)),o.height>=i.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=i.width,o.maxTop=i.height},renderCanvas:function(t,e){var n=this.canvasData,i=this.imageData;if(e){var o=function(t){var e=t.width,n=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:n,height:e};var o=i%90*Math.PI/180,a=Math.sin(o),r=Math.cos(o),c=e*r+n*a,s=e*a+n*r;return i>90?{width:s,height:c}:{width:c,height:s}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=o.width,r=o.height,c=n.width*(a/n.naturalWidth),s=n.height*(r/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(s-n.height)/2,n.width=c,n.height=s,n.aspectRatio=a/r,n.naturalWidth=a,n.naturalHeight=r,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,X(this.canvas,U({width:n.width,height:n.height},st({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,i=n.naturalWidth*(e.width/e.naturalWidth),o=n.naturalHeight*(e.height/e.naturalHeight);U(n,{width:i,height:o,left:(e.width-i)/2,top:(e.height-o)/2}),X(this.image,U({width:n.width,height:n.height},st(U({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};n&&(e.height*n>e.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*i),o.height=Math.max(o.minHeight,o.height*i),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=U({},o)},limitCropBox:function(t,e){var n=this.options,i=this.containerData,o=this.canvasData,a=this.cropBoxData,r=this.limited,c=n.aspectRatio;if(t){var s=Number(n.minCropBoxWidth)||0,l=Number(n.minCropBoxHeight)||0,h=r?Math.min(i.width,o.width,o.width+o.left,i.width-o.left):i.width,d=r?Math.min(i.height,o.height,o.height+o.top,i.height-o.top):i.height;s=Math.min(s,i.width),l=Math.min(l,i.height),c&&(s&&l?l*c>s?l=s/c:s=l*c:s?l=s/c:l&&(s=l*c),d*c>h?d=h/c:h=d*c),a.minWidth=Math.min(s,h),a.minHeight=Math.min(l,d),a.maxWidth=h,a.maxHeight=d}e&&(r?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(i.width,o.left+o.width)-a.width,a.maxTop=Math.min(i.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&G(this.face,w,n.width>=e.width&&n.height>=e.height?"move":"all"),X(this.cropBox,U({width:n.width,height:n.height},st({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),nt(this.element,"crop",this.getData())}},ft={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,i=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=i,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,n){var r=n;"string"==typeof n?r=t.ownerDocument.querySelectorAll(n):n.querySelector&&(r=[n]),this.previews=r,j(r,(function(t){var n=document.createElement("img");G(t,O,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=i,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){j(this.previews,(function(t){var e=V(t,O);X(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(L(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat($(e)))}(t,O)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,i=n.width,o=n.height,a=t.width,r=t.height,c=n.left-e.left-t.left,s=n.top-e.top-t.top;this.cropped&&!this.disabled&&(X(this.viewBoxImage,U({width:a,height:r},st(U({translateX:-c,translateY:-s},t)))),j(this.previews,(function(e){var n=V(e,O),l=n.width,h=n.height,d=l,u=h,p=1;i&&(u=o*(p=l/i)),o&&u>h&&(d=i*(p=h/o),u=h),X(e,{width:d,height:u}),X(e.getElementsByTagName("img")[0],U({width:a*p,height:r*p},st(U({translateX:-c*p,translateY:-s*p},t))))})))}},bt={bind:function(){var t=this.element,e=this.options,n=this.cropper;E(e.cropstart)&&et(t,"cropstart",e.cropstart),E(e.cropmove)&&et(t,"cropmove",e.cropmove),E(e.cropend)&&et(t,"cropend",e.cropend),E(e.crop)&&et(t,"crop",e.crop),E(e.zoom)&&et(t,"zoom",e.zoom),et(n,y,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&et(n,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&et(n,"dblclick",this.onDblclick=this.dblclick.bind(this)),et(t.ownerDocument,P,this.onCropMove=this.cropMove.bind(this)),et(t.ownerDocument,x,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&et(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;E(e.cropstart)&&tt(t,"cropstart",e.cropstart),E(e.cropmove)&&tt(t,"cropmove",e.cropmove),E(e.cropend)&&tt(t,"cropend",e.cropend),E(e.crop)&&tt(t,"crop",e.crop),E(e.zoom)&&tt(t,"zoom",e.zoom),tt(n,y,this.onCropStart),e.zoomable&&e.zoomOnWheel&&tt(n,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&tt(n,"dblclick",this.onDblclick),tt(t.ownerDocument,P,this.onCropMove),tt(t.ownerDocument,x,this.onCropEnd),e.responsive&&tt(window,"resize",this.onResize)}},mt={resize:function(){if(!this.disabled){var t,e,n=this.options,i=this.container,o=this.containerData,a=i.offsetWidth/o.width;1===a&&i.offsetHeight===o.height||(n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(j(t,(function(e,n){t[n]=e*a}))),this.setCropBoxData(j(e,(function(t,n){e[n]=t*a})))))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=u,((t=this.dragBox).classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(B(e)&&1!==e||B(n)&&0!==n||t.ctrlKey))){var i,o=this.options,a=this.pointers;t.changedTouches?j(t.changedTouches,(function(t){a[t.identifier]=lt(t)})):a[t.pointerId||0]=lt(t),i=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?"zoom":V(t.target,w),C.test(i)&&!1!==nt(this.element,"cropstart",{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,"crop"===i&&(this.cropping=!0,Y(this.dragBox,m)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==nt(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?j(t.changedTouches,(function(t){U(n[t.identifier]||{},lt(t,!0))})):U(n[t.pointerId||0]||{},lt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?j(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,q(this.dragBox,m,this.cropped&&this.options.modal)),nt(this.element,"cropend",{originalEvent:t,action:e}))}}},vt={change:function(t){var e,n=this.canvasData,i=this.containerData,o=this.cropBoxData,r=this.pointers,c=this.action,s=this.options.aspectRatio,l=o.left,h=o.top,d=o.width,u=o.height,p=l+d,f=h+u,b=0,m=0,v=i.width,w=i.height,O=!0;!s&&t.shiftKey&&(s=d&&u?d/u:1),this.limited&&(m=o.minTop,v=(b=o.minLeft)+Math.min(i.width,n.width,n.left+n.width),w=m+Math.min(i.height,n.height,n.top+n.height));var y=r[Object.keys(r)[0]],P={x:y.endX-y.startX,y:y.endY-y.startY},x=function(t){switch(t){case"e":p+P.x>v&&(P.x=v-p);break;case"w":l+P.x<b&&(P.x=b-l);break;case"n":h+P.y<m&&(P.y=m-h);break;case"s":f+P.y>w&&(P.y=w-f)}};switch(c){case"all":l+=P.x,h+=P.y;break;case"e":if(P.x>=0&&(p>=v||s&&(h<=m||f>=w))){O=!1;break}x("e"),(d+=P.x)<0&&(c="w",l-=d=-d),s&&(h+=(o.height-(u=d/s))/2);break;case"n":if(P.y<=0&&(h<=m||s&&(l<=b||p>=v))){O=!1;break}x("n"),h+=P.y,(u-=P.y)<0&&(c="s",h-=u=-u),s&&(l+=(o.width-(d=u*s))/2);break;case"w":if(P.x<=0&&(l<=b||s&&(h<=m||f>=w))){O=!1;break}x("w"),l+=P.x,(d-=P.x)<0&&(c="e",l-=d=-d),s&&(h+=(o.height-(u=d/s))/2);break;case"s":if(P.y>=0&&(f>=w||s&&(l<=b||p>=v))){O=!1;break}x("s"),(u+=P.y)<0&&(c="n",h-=u=-u),s&&(l+=(o.width-(d=u*s))/2);break;case"ne":if(s){if(P.y<=0&&(h<=m||p>=v)){O=!1;break}x("n"),h+=P.y,d=(u-=P.y)*s}else x("n"),x("e"),P.x>=0?p<v?d+=P.x:P.y<=0&&h<=m&&(O=!1):d+=P.x,P.y<=0?h>m&&(u-=P.y,h+=P.y):(u-=P.y,h+=P.y);d<0&&u<0?(c="sw",h-=u=-u,l-=d=-d):d<0?(c="nw",l-=d=-d):u<0&&(c="se",h-=u=-u);break;case"nw":if(s){if(P.y<=0&&(h<=m||l<=b)){O=!1;break}x("n"),h+=P.y,l+=o.width-(d=(u-=P.y)*s)}else x("n"),x("w"),P.x<=0?l>b?(d-=P.x,l+=P.x):P.y<=0&&h<=m&&(O=!1):(d-=P.x,l+=P.x),P.y<=0?h>m&&(u-=P.y,h+=P.y):(u-=P.y,h+=P.y);d<0&&u<0?(c="se",h-=u=-u,l-=d=-d):d<0?(c="ne",l-=d=-d):u<0&&(c="sw",h-=u=-u);break;case"sw":if(s){if(P.x<=0&&(l<=b||f>=w)){O=!1;break}x("w"),l+=P.x,u=(d-=P.x)/s}else x("s"),x("w"),P.x<=0?l>b?(d-=P.x,l+=P.x):P.y>=0&&f>=w&&(O=!1):(d-=P.x,l+=P.x),P.y>=0?f<w&&(u+=P.y):u+=P.y;d<0&&u<0?(c="ne",h-=u=-u,l-=d=-d):d<0?(c="se",l-=d=-d):u<0&&(c="nw",h-=u=-u);break;case"se":if(s){if(P.x>=0&&(p>=v||f>=w)){O=!1;break}x("e"),u=(d+=P.x)/s}else x("s"),x("e"),P.x>=0?p<v?d+=P.x:P.y>=0&&f>=w&&(O=!1):d+=P.x,P.y>=0?f<w&&(u+=P.y):u+=P.y;d<0&&u<0?(c="nw",h-=u=-u,l-=d=-d):d<0?(c="sw",l-=d=-d):u<0&&(c="ne",h-=u=-u);break;case"move":this.move(P.x,P.y),O=!1;break;case"zoom":this.zoom(function(t){var e=a({},t),n=[];return j(t,(function(t,i){delete e[i],j(e,(function(e){var i=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),c=Math.sqrt(i*i+o*o),s=Math.sqrt(a*a+r*r);n.push((s-c)/c)}))})),n.sort((function(t,e){return Math.abs(t)<Math.abs(e)})),n[0]}(r),t),O=!1;break;case"crop":if(!P.x||!P.y){O=!1;break}e=it(this.cropper),l=y.startX-e.left,h=y.startY-e.top,d=o.minWidth,u=o.minHeight,P.x>0?c=P.y>0?"se":"ne":P.x<0&&(l-=d,c=P.y>0?"sw":"nw"),P.y<0&&(h-=u),this.cropped||(K(this.cropBox,g),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}O&&(o.width=d,o.height=u,o.left=l,o.top=h,this.action=c,this.renderCropBox()),j(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},wt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Y(this.dragBox,m),K(this.cropBox,g),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=U({},this.initialImageData),this.canvasData=U({},this.initialCanvasData),this.cropBoxData=U({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(U(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),K(this.dragBox,m),Y(this.cropBox,g)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,j(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,K(this.cropper,p)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Y(this.cropper,p)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=n.left,o=n.top;return this.moveTo(S(t)?t:i+Number(t),S(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(B(t)&&(n.left=t,i=!0),B(e)&&(n.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=Number(t),this.zoomTo(n.width*(t=t<0?1/(1-t):1+t)/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var i=this.options,o=this.canvasData,a=o.width,r=o.height,c=o.naturalWidth,s=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var l=c*t,h=s*t;if(!1===nt(this.element,"zoom",{ratio:t,oldRatio:a/c,originalEvent:n}))return this;if(n){var d=this.pointers,u=it(this.cropper),p=d&&Object.keys(d).length?function(t){var e=0,n=0,i=0;return j(t,(function(t){e+=t.startX,n+=t.startY,i+=1})),{pageX:e/=i,pageY:n/=i}}(d):{pageX:n.pageX,pageY:n.pageY};o.left-=(p.pageX-u.left-o.left)/a*(l-a),o.top-=(p.pageY-u.top-o.top)/r*(h-r)}else z(e)&&B(e.x)&&B(e.y)?(o.left-=(e.x-o.left)/a*(l-a),o.top-=(e.y-o.top)/r*(h-r)):(o.left-=(l-a)/2,o.top-=(h-r)/2);o.width=l,o.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return B(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,B(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(B(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(B(t)&&(n.scaleX=t,i=!0),B(e)&&(n.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,i=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var r=i.width/i.naturalWidth;if(j(t={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height},(function(e,n){t[n]=e/r})),e){var c=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=c-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=i.rotate||0),n.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,i=this.canvasData,o={};if(this.ready&&!this.disabled&&z(t)){var a=!1;e.rotatable&&B(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,a=!0),e.scalable&&(B(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,a=!0),B(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var r=n.width/n.naturalWidth;B(t.x)&&(o.left=t.x*r+i.left),B(t.y)&&(o.top=t.y*r+i.top),B(t.width)&&(o.width=t.width*r),B(t.height)&&(o.height=t.height*r),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?U({},this.containerData):{}},getImageData:function(){return this.sized?U({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&j(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&z(t)&&(B(t.left)&&(e.left=t.left),B(t.top)&&(e.top=t.top),B(t.width)?(e.width=t.width,e.height=t.width/n):B(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,i=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&z(t)&&(B(t.left)&&(i.left=t.left),B(t.top)&&(i.top=t.top),B(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),B(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),o&&(e?i.height=i.width/o:n&&(i.width=i.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=dt(this.image,this.imageData,e,t);if(!this.cropped)return n;var i=this.getData(),o=i.x,a=i.y,c=i.width,s=i.height,l=n.width/Math.floor(e.naturalWidth);1!==l&&(o*=l,a*=l,c*=l,s*=l);var h=c/s,d=ht({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=ht({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=ht({aspectRatio:h,width:t.width||(1!==l?n.width:c),height:t.height||(1!==l?n.height:s)}),g=p.width,f=p.height;g=Math.min(d.width,Math.max(u.width,g)),f=Math.min(d.height,Math.max(u.height,f));var b=document.createElement("canvas"),m=b.getContext("2d");b.width=W(g),b.height=W(f),m.fillStyle=t.fillColor||"transparent",m.fillRect(0,0,g,f);var v=t.imageSmoothingEnabled,w=void 0===v||v,O=t.imageSmoothingQuality;m.imageSmoothingEnabled=w,O&&(m.imageSmoothingQuality=O);var y,P,x,C,M,k,D=n.width,_=n.height,I=o,B=a;I<=-c||I>D?(I=0,y=0,x=0,M=0):I<=0?(x=-I,I=0,M=y=Math.min(D,c+I)):I<=D&&(x=0,M=y=Math.min(c,D-I)),y<=0||B<=-s||B>_?(B=0,P=0,C=0,k=0):B<=0?(C=-B,B=0,k=P=Math.min(_,s+B)):B<=_&&(C=0,k=P=Math.min(s,_-B));var F=[I,B,y,P];if(M>0&&k>0){var S=g/c;F.push(x*S,C*S,M*S,k*S)}return m.drawImage.apply(m,[n].concat(r(F.map((function(t){return Math.floor(W(t))}))))),b},setAspectRatio:function(t){var e=this.options;return this.disabled||S(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var o="crop"===t,a=e.movable&&"move"===t;e.dragMode=t=o||a?t:"none",G(n,w,t),q(n,u,o),q(n,v,a),e.cropBoxMovable||(G(i,w,t),q(i,u,o),q(i,v,a))}return this}},Ot=l.Cropper,yt=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!n||!D.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=U({},_,z(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,o,a;return i=t,a=[{key:"noConflict",value:function(){return window.Cropper=Ot,t}},{key:"setDefaults",value:function(t){U(_,z(t)&&t)}}],(o=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(M.test(t))k.test(t)?this.read((o=t.replace(pt,""),a=atob(o),r=new ArrayBuffer(a.length),j(c=new Uint8Array(r),(function(t,e){c[e]=a.charCodeAt(e)})),r)):this.clone();else{var o,a,r,c,s=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=l,s.onerror=l,s.ontimeout=l,s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},i.checkCrossOrigin&&rt(t)&&n.crossOrigin&&(t=ct(t)),s.open("GET",t),s.responseType="arraybuffer",s.withCredentials="use-credentials"===n.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,i=function(t){var e,n=new DataView(t);try{var i,o,a;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var r=n.byteLength,c=2;c+1<r;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){o=c;break}c+=1}if(o){var s=o+10;if("Exif"===function(t,e,n){var i="";n+=e;for(var o=e;o<n;o+=1)i+=ut(t.getUint8(o));return i}(n,o+4,4)){var l=n.getUint16(s);if(((i=18761===l)||19789===l)&&42===n.getUint16(s+2,i)){var h=n.getUint32(s+4,i);h>=8&&(a=s+h)}}}if(a){var d,u,p=n.getUint16(a,i);for(u=0;u<p;u+=1)if(274===n.getUint16(d=a+12*u+2,i)){e=n.getUint16(d+=8,i),n.setUint16(d,1,i);break}}}catch(g){e=1}return e}(t),o=0,a=1,r=1;if(i>1){this.url=function(t,e){for(var n=[],i=new Uint8Array(t);i.length>0;)n.push(ut.apply(null,R(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(n.join("")))}(t);var c=function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(i);o=c.rotate,a=c.scaleX,r=c.scaleY}e.rotatable&&(n.rotate=o),e.scalable&&(n.scaleX=a,n.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,i=e;this.options.checkCrossOrigin&&rt(e)&&(n||(n="anonymous"),i=ct(e)),this.crossOrigin=n,this.crossOriginUrl=i;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=i||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),Y(o,f),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),i=function(e,n){U(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){i(o.width,o.height),n||a.removeChild(o)},o.src=e.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}else i(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,i=t.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=o.querySelector(".".concat("cropper","-container")),r=a.querySelector(".".concat("cropper","-canvas")),c=a.querySelector(".".concat("cropper","-drag-box")),s=a.querySelector(".".concat("cropper","-crop-box")),l=s.querySelector(".".concat("cropper","-face"));this.container=i,this.cropper=a,this.canvas=r,this.dragBox=c,this.cropBox=s,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=l,r.appendChild(n),Y(t,g),i.insertBefore(a,t.nextSibling),this.isImg||K(n,f),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Y(s,g),e.guides||Y(s.getElementsByClassName("".concat("cropper","-dashed")),g),e.center||Y(s.getElementsByClassName("".concat("cropper","-center")),g),e.background&&Y(a,"".concat("cropper","-bg")),e.highlight||Y(l,b),e.cropBoxMovable&&(Y(l,v),G(l,w,"all")),e.cropBoxResizable||(Y(s.getElementsByClassName("".concat("cropper","-line")),g),Y(s.getElementsByClassName("".concat("cropper","-point")),g)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),E(e.ready)&&et(t,"ready",e.ready,{once:!0}),nt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),K(this.element,g))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(i.prototype,o),a&&n(i,a),t}();return U(yt.prototype,gt,ft,bt,mt,vt,wt),yt}()}}])}();